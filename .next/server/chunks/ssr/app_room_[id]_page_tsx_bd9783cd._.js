module.exports=[13868,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(40695),e=a.i(5522),f=a.i(3130),g=a.i(35112),h=a.i(70106);let i=(0,h.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),j=(0,h.default)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var k=a.i(81560);let l=(0,h.default)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),m=(0,h.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),n=(0,c.memo)(function({message:a,sender:e,avatar:f,showAvatar:h=!0,isOwn:n=!1,timestamp:o,reactions:p=[],messageId:q,onDelete:r,mediaUrl:s,mediaType:t}){let[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(0),[A,B]=(0,c.useState)(0),C=(0,c.useRef)(null),D=(0,c.useRef)(null),E=()=>{navigator.clipboard.writeText(a),v(!1)},F=async()=>{if(navigator.share)try{await navigator.share({title:`Message from ${e}`,text:a}),v(!1)}catch(a){E()}else E()};return(0,c.useEffect)(()=>{if(u&&w&&C.current&&D.current){let a=D.current.getBoundingClientRect().height;B(Math.max(8,C.current.top-8-a))}},[u,w]),(0,b.jsxs)("div",{className:`flex gap-1.5 sm:gap-3 mb-2 sm:mb-4 group ${n?"flex-row-reverse":""}`,style:{contentVisibility:"auto",containIntrinsicSize:"160px"},"data-message-id":q,children:[h&&(0,b.jsx)("img",{src:f||"/placeholder.svg",alt:e,className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full flex-shrink-0"}),(0,b.jsxs)("div",{className:`flex flex-col ${n?"items-end":"items-start"} flex-1 min-w-0`,children:[(0,b.jsx)("p",{className:"text-[10px] sm:text-xs text-foreground/50 px-1.5 sm:px-3 mb-0.5 sm:mb-1",children:e}),(0,b.jsxs)("div",{className:`relative max-w-[80%] sm:max-w-xs md:max-w-md px-2.5 sm:px-4 py-1.5 sm:py-3 rounded-2xl sm:rounded-3xl ${n?"bg-primary text-primary-foreground rounded-br-sm":"bg-secondary text-secondary-foreground rounded-bl-sm"}`,children:[(0,b.jsx)("p",{className:"break-words text-xs sm:text-base leading-relaxed",children:a}),s&&t?.startsWith("image/")&&(0,b.jsx)("div",{className:"mt-2 rounded-lg overflow-hidden max-w-full",children:(0,b.jsx)("img",{src:s,alt:"Shared image",className:"max-w-full h-auto rounded-lg cursor-pointer",onClick:()=>window.open(s,"_blank")})}),s&&!t?.startsWith("image/")&&(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsxs)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-xs sm:text-sm text-primary hover:underline flex items-center gap-1",children:[(0,b.jsx)(m,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"View attachment"]})}),(0,b.jsx)("div",{className:`absolute ${n?"-top-3 -right-3":"-top-3 -left-3"} z-10`,children:(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:`h-6 w-6 sm:h-7 sm:w-7 rounded-full ${n?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"} shadow-md border border-border/40 hover:brightness-110`,onClick:a=>{a.stopPropagation();try{let b=a.currentTarget.getBoundingClientRect();C.current=b;let c=window.innerHeight-b.bottom;x(c<160);let d=Math.min(Math.max(8,b.left),window.innerWidth-168),e=b.bottom+8;z(d),B(e)}catch{}v(a=>!a)},children:(0,b.jsx)(l,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})}),u&&(0,g.createPortal)((0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-[60] bg-background/30 backdrop-blur-[1px]",onClick:()=>v(!1)}),(0,b.jsxs)("div",{ref:D,className:"fixed bg-card border border-border rounded-lg shadow-lg p-1 z-[70] min-w-[160px]",style:{left:y,top:A},children:[(0,b.jsxs)("button",{onClick:a=>{a.stopPropagation(),E()},"data-action":"copy","data-message-id":q,className:"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-accent active:bg-accent/80 rounded-md transition-colors text-foreground",children:[(0,b.jsx)(i,{className:"w-4 h-4"}),"Copy"]}),(0,b.jsxs)("button",{onClick:a=>{a.stopPropagation(),F()},"data-action":"share","data-message-id":q,className:"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-accent active:bg-accent/80 rounded-md transition-colors text-foreground",children:[(0,b.jsx)(j,{className:"w-4 h-4"}),"Share"]}),n&&r&&(0,b.jsxs)("button",{onClick:a=>{a.stopPropagation(),q&&r&&confirm("Are you sure you want to delete this message?")&&(r(q),v(!1))},"data-action":"delete","data-message-id":q,className:"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-destructive/10 active:bg-destructive/20 text-destructive rounded-md transition-colors",children:[(0,b.jsx)(k.Trash2,{className:"w-4 h-4"}),"Delete"]})]})]}),document.body)]}),(0,b.jsx)("div",{className:"flex gap-1 mt-0.5 sm:mt-2 px-1.5 sm:px-2 flex-wrap justify-center",children:p.map((a,c)=>(0,b.jsxs)("span",{className:"text-[10px] sm:text-xs bg-accent/20 rounded-full px-1.5 sm:px-2 py-0.5 hover:bg-accent/40 cursor-pointer transition-colors",children:[a.emoji," ",a.count>1?a.count:""]},c))}),o&&(0,b.jsx)("p",{className:"text-[10px] sm:text-xs text-foreground/40 mt-0.5 sm:mt-1 px-1.5 sm:px-2",children:o})]})]})});var o=a.i(52025);let p=(0,h.default)("SendHorizontal",[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]),q=(0,h.default)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),r=(0,h.default)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),s=(0,h.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var t=a.i(33508),u=a.i(38246),v=a.i(69240),w=a.i(50944);function x({params:a}){let g,h,[i,j]=(0,c.useState)([]),[m,x]=(0,c.useState)(200),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(!0),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)(!1),S=(0,c.useRef)(null),T=(0,c.useRef)(null),U=(0,c.useRef)([]),V=(0,c.useRef)(null),W=(0,c.useRef)(null),X=(0,c.useRef)(null),Y=(0,v.createClient)(),Z=(0,w.useRouter)(),$=async()=>{try{if(!I?.id||!K)return void Z.push("/");await Y.from("room_members").delete().eq("room_id",K).eq("user_id",I.id),Z.push("/")}catch(a){Z.push("/")}};(0,c.useEffect)(()=>{(async()=>{L((await Promise.resolve(a)).id)})()},[a]);let _=()=>{requestAnimationFrame(()=>{S.current?.scrollIntoView({behavior:"smooth"})})},aa=a=>{let b={id:`sys_${Date.now()}`,content:a,created_at:new Date().toISOString(),user_id:"system",profiles:{username:"System"}};j(a=>[...a,b]),setTimeout(_,100)};(0,c.useEffect)(()=>{K&&(async()=>{try{let{data:a,error:b}=await Y.from("rooms").select("*").eq("id",K).single();if(b)throw b;z(a)}catch(a){console.error("Error fetching room:",a),Z.push("/")}})()},[K,Y,Z]),(0,c.useEffect)(()=>{(async()=>{let{data:{user:a}}=await Y.auth.getUser();J(a)})()},[Y]),(0,c.useEffect)(()=>{(async()=>{if(K&&I?.id)try{await Y.from("room_members").delete().eq("user_id",I.id);let{data:a}=await Y.from("room_members").select("id").eq("room_id",K),b=a?.length??0,c=y?.max_members??8;if(b>=c)return;await Y.from("room_members").insert({room_id:K,user_id:I.id})}catch{}})();let a=null;(()=>{if(!K)return;let b=()=>{try{fetch("/api/room-members/heartbeat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room_id:K}),keepalive:!0}).catch(()=>{})}catch{}};b(),a=window.setInterval(b,25e3)})();let b=()=>{if(K)try{let a=new Blob([JSON.stringify({room_id:K})],{type:"application/json"});navigator.sendBeacon("/api/room-members/leave",a)}catch{}},c=()=>{b()},d=()=>{"hidden"===document.visibilityState&&b()};return window.addEventListener("beforeunload",c),document.addEventListener("visibilitychange",d),()=>{if(window.removeEventListener("beforeunload",c),document.removeEventListener("visibilitychange",d),a)try{window.clearInterval(a)}catch{}if(K&&I?.id)try{Y.from("room_members").delete().eq("room_id",K).eq("user_id",I.id).then(()=>{}).catch(()=>{})}catch{}}},[K,I,Y,y]),(0,c.useEffect)(()=>{let a=async()=>{try{let a=await fetch(`/api/chat/get-messages?room_id=${K}`);if(!a.ok)throw Error("Failed to fetch messages");let b=[];try{b=await a.json()}catch{b=[]}performance.mark("messages_fetch_start"),j(b||[]),F(!1),requestAnimationFrame(()=>{performance.mark("messages_render_end"),performance.measure("messages_initial_render","messages_fetch_start","messages_render_end")}),setTimeout(_,100)}catch(a){console.error("Error fetching messages:",a),F(!1)}};K&&a()},[K]),(0,c.useEffect)(()=>{if(!K)return;let a=Y.channel(`room:${K}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`room_id=eq.${K}`},async a=>{let{data:b}=await Y.from("messages").select(`
              *,
              profiles (username, avatar_url)
            `).eq("id",a.new.id).single();b&&(performance.mark("message_append_start"),j(a=>[...a,b]),requestAnimationFrame(()=>{performance.mark("message_append_end"),performance.measure("message_append_render","message_append_start","message_append_end")}),setTimeout(_,100))}).subscribe();return()=>{Y.removeChannel(a)}},[K,Y]),(0,c.useEffect)(()=>{_()},[i]),(0,c.useEffect)(()=>{let a=T.current;if(!a)return;let b=!1,c=()=>{b||(b=!0,requestAnimationFrame(()=>{b=!1}))};return a.addEventListener("scroll",c,{passive:!0}),()=>{a.removeEventListener("scroll",c)}},[]);let ab=async a=>{try{if("undefined"!=typeof CompressionStream){let b=new CompressionStream("gzip"),c=new Blob([JSON.stringify(a)],{type:"application/json"}).stream().pipeThrough(b),d=await new Response(c).arrayBuffer();return new Uint8Array(d)}}catch{}return null},ac=async()=>{if(!U.current.length)return;let a=U.current.splice(0,U.current.length),b=await ab({room_id:K,messages:a}),c=await fetch("/api/chat/send-batch",{method:"POST",headers:b?{"Content-Encoding":"gzip"}:{"Content-Type":"application/json"},body:b||JSON.stringify({room_id:K,messages:a})});if(!c.ok)try{let a=await c.json();console.error("Batch send error:",a),401===c.status||403===c.status?aa("Create an account to send messages"):aa("Message failed to send. Please try again")}catch{aa("Message failed to send. Please try again")}},ad=async()=>{if(!A.trim()&&!M||!I||G)return;H(!0),P(!0);let a=null,b=null;try{var c;if(M){if(ag)throw Error("Media uploads are not available in Guest mode");let c=new FormData;c.append("file",M),c.append("room_id",K);let d=await fetch("/api/chat/upload-media",{method:"POST",body:c});if(!d.ok)throw Error("Failed to upload media");let e=await d.json();a=e.media_url,b=e.media_type}let d=A.trim()||(M?"ðŸ“· Photo":"");if(W.current){let a=performance.now()-W.current;try{console.log("input_latency_ms",Math.round(a))}catch{}}c={content:d,media_url:a,media_type:b},U.current.push(c),V.current||(V.current=setTimeout(()=>{V.current=null,ac()},200)),B(""),N(null),X.current&&(X.current.value="")}catch(a){console.error("Error sending message:",a),alert(a?.message||"Failed to send message. Please try again.")}finally{H(!1),P(!1)}},ae=async()=>{if(confirm("Are you sure you want to delete this room? This action cannot be undone."))try{if(!(await fetch(`/api/rooms/delete?id=${K}`,{method:"DELETE"})).ok)throw Error("Failed to delete room");Z.push("/")}catch(a){console.error("Error deleting room:",a),alert("Failed to delete room. Please try again.")}},af=I&&y&&y.created_by===I.id,ag=!!I&&(I.is_anonymous||I.app_metadata?.provider==="anonymous"),ah=async a=>{try{if(!(await fetch(`/api/chat/delete-message?id=${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete message");j(b=>b.filter(b=>b.id!==a))}catch(a){console.error("Error deleting message:",a),alert("Failed to delete message. Please try again.")}};return((0,c.useEffect)(()=>{let a=setInterval(()=>{let a=performance.memory;if(a)try{console.log("memory_mb",Math.round(a.usedJSHeapSize/1048576))}catch{}},5e3);return()=>clearInterval(a)},[]),E)?(0,b.jsx)("div",{className:"h-screen flex items-center justify-center bg-background",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-12 h-12 border-4 border-primary/20 border-t-primary rounded-full animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-foreground/60",children:"Loading chat room..."})]})}):y?(0,b.jsxs)("div",{className:"h-screen flex flex-col bg-background",children:[(0,b.jsx)("header",{className:"border-b border-border sticky top-0 z-40 bg-background/95 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto px-2 sm:px-4 py-2 sm:py-4 flex items-center justify-between gap-1.5 sm:gap-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 sm:gap-4 min-w-0 flex-1",children:[(0,b.jsx)(u.default,{href:"/",className:"hover:opacity-70 transition-opacity flex-shrink-0",children:(0,b.jsx)("h1",{className:"text-base sm:text-xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"ChatBloom"})}),(0,b.jsxs)("div",{className:"hidden sm:flex items-center gap-2 pl-4 border-l border-border",children:[(0,b.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-primary to-secondary rounded-2xl flex items-center justify-center text-lg sm:text-xl flex-shrink-0",children:y.emoji||"ðŸ’¬"}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("h2",{className:"font-bold text-base sm:text-lg truncate",children:y.name}),(0,b.jsx)("p",{className:"text-xs text-foreground/60 truncate",children:y.topic})]})]}),(0,b.jsxs)("div",{className:"sm:hidden flex items-center gap-1.5 min-w-0 flex-1",children:[(0,b.jsx)("div",{className:"w-7 h-7 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center text-sm flex-shrink-0",children:y.emoji||"ðŸ’¬"}),(0,b.jsx)("div",{className:"min-w-0",children:(0,b.jsx)("h2",{className:"font-bold text-xs truncate",children:y.name})})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-0.5 sm:gap-2 flex-shrink-0",children:[(0,b.jsx)(o.ThemeToggle,{}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"rounded-full h-8 w-8 sm:h-10 sm:w-10",onClick:()=>R(!Q),children:(0,b.jsx)(l,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5"})}),I&&(0,b.jsx)(d.Button,{variant:"outline",size:"sm",className:"rounded-full ml-1",onClick:$,children:"Leave"}),Q&&af&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-[5] bg-background/20",onClick:()=>R(!1)}),(0,b.jsxs)("div",{className:"absolute right-0 top-12 bg-card border border-border rounded-lg shadow-lg p-1 z-10 min-w-[140px]",children:[(0,b.jsx)(u.default,{href:`/room/${K}/edit`,children:(0,b.jsxs)("button",{className:"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-accent active:bg-accent/80 rounded-md transition-colors",children:[(0,b.jsx)(s,{className:"w-4 h-4"}),"Edit Room"]})}),(0,b.jsxs)("button",{onClick:()=>{R(!1),ae()},className:"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-destructive/10 active:bg-destructive/20 text-destructive rounded-md transition-colors",children:[(0,b.jsx)(k.Trash2,{className:"w-4 h-4"}),"Delete Room"]})]})]})]})]})]})}),(0,b.jsx)("div",{ref:T,className:"flex-1 overflow-y-auto p-1.5 sm:p-4 md:p-6 space-y-1 sm:space-y-4",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",onClick:a=>{let b=a.target.closest("[data-action]");if(b){let a=b.getAttribute("data-action"),c=b.getAttribute("data-message-id");"delete"===a&&c&&ah(c)}},children:[0===i.length?(0,b.jsx)("div",{className:"text-center py-8 sm:py-12",children:(0,b.jsx)("p",{className:"text-foreground/60 text-sm sm:text-base",children:"No messages yet. Be the first to say something!"})}):(g=Math.max(0,i.length-m),h=i.slice(g),(0,b.jsxs)(b.Fragment,{children:[g>0&&(0,b.jsx)("div",{className:"flex justify-center py-2",children:(0,b.jsx)(d.Button,{variant:"outline",size:"sm",className:"rounded-full",onClick:()=>x(a=>a+200),children:"Load older messages"})}),h.map(a=>(0,b.jsx)(n,{message:a.content,sender:a.profiles?.username||"Anonymous",avatar:(a=>{if(a.profiles?.avatar_url)return a.profiles.avatar_url;let b=a.profiles?.username||a.user_id||"user";return b.startsWith("Guest")?"":`https://api.dicebear.com/7.x/avataaars/svg?seed=${b}`})(a),showAvatar:!(a.profiles?.username||"").startsWith("Guest"),isOwn:I?.id===a.user_id,timestamp:new Date(a.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),reactions:[],messageId:a.id,onDelete:ah,mediaUrl:a.media_url,mediaType:a.media_type},a.id))]})),(0,b.jsx)("div",{ref:S})]})}),I?(0,b.jsx)("div",{className:"border-t border-border bg-background sticky bottom-0 p-2 sm:p-4 md:p-6",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[C&&(0,b.jsx)(f.Card,{className:"mb-2 sm:mb-4 p-2 sm:p-4 bg-card",children:(0,b.jsx)("div",{className:"grid grid-cols-6 sm:grid-cols-5 gap-1.5 sm:gap-2",children:["ðŸ˜Š","ðŸ˜‚","ðŸŽ‰","â¤ï¸","ðŸ”¥","ðŸ‘","ðŸŽ®","ðŸŽµ","âœ¨","ðŸ’¯"].map(a=>(0,b.jsx)("button",{onClick:()=>{B(A+a),D(!1)},className:"text-xl sm:text-2xl hover:scale-125 transition-transform p-1 sm:p-2",children:a},a))})}),M&&(0,b.jsx)("div",{className:"mb-2 relative inline-block",children:(0,b.jsxs)("div",{className:"relative w-20 h-20 sm:w-24 sm:h-24 rounded-lg overflow-hidden border border-border",children:[(0,b.jsx)("img",{src:URL.createObjectURL(M),alt:"Preview",className:"w-full h-full object-cover"}),(0,b.jsx)("button",{onClick:()=>{N(null),X.current&&(X.current.value="")},className:"absolute top-1 right-1 bg-destructive text-destructive-foreground rounded-full p-1 hover:bg-destructive/90",children:(0,b.jsx)(t.X,{className:"w-3 h-3"})})]})}),(0,b.jsxs)("div",{className:"flex gap-1 sm:gap-2 items-end",children:[(0,b.jsx)("input",{ref:X,type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];b&&(ag?aa("Create an account to upload images"):["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(b.type)?b.size>5242880?alert("File size must be less than 5MB"):N(b):alert("Please select an image file (JPEG, PNG, GIF, or WebP)"))},className:"hidden"}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"rounded-full h-8 w-8 sm:h-10 sm:w-10",onClick:()=>D(!C),children:(0,b.jsx)(q,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"rounded-full h-8 w-8 sm:h-10 sm:w-10",onClick:()=>{ag?aa("Create an account to upload images"):X.current?.click()},disabled:O,children:(0,b.jsx)(r,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5"})}),(0,b.jsx)(e.Input,{placeholder:"Type a message...",value:A,onChange:a=>B(a.target.value),onKeyPress:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),W.current=performance.now(),ad())},className:"rounded-full px-3 sm:px-6 py-1.5 sm:py-2 text-xs sm:text-base flex-1 min-w-0 h-8 sm:h-10",disabled:G||O}),(0,b.jsx)(d.Button,{onClick:()=>{W.current=performance.now(),ad()},className:"bg-primary hover:bg-primary/90 rounded-full h-8 w-8 sm:h-10 sm:w-10 flex-shrink-0",size:"icon",disabled:G||O||!A.trim()&&!M,children:O?(0,b.jsx)("div",{className:"w-3.5 h-3.5 sm:w-5 sm:h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,b.jsx)(p,{className:"w-3.5 h-3.5 sm:w-5 sm:h-5"})})]})]})}):(0,b.jsxs)("div",{className:"border-t border-border bg-background p-2 sm:p-4 text-center",children:[(0,b.jsx)("p",{className:"text-foreground/60 mb-1.5 sm:mb-2 text-xs sm:text-base",children:"Please sign in to send messages"}),(0,b.jsx)(u.default,{href:"/auth",children:(0,b.jsx)(d.Button,{size:"sm",className:"text-xs sm:text-sm h-7 sm:h-9",children:"Sign In"})})]})]}):(0,b.jsx)("div",{className:"h-screen flex items-center justify-center bg-background",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-foreground/60 mb-4",children:"Room not found"}),(0,b.jsx)(u.default,{href:"/",children:(0,b.jsx)(d.Button,{children:"Go Home"})})]})})}a.s(["default",()=>x],13868)}];

//# sourceMappingURL=app_room_%5Bid%5D_page_tsx_bd9783cd._.js.map