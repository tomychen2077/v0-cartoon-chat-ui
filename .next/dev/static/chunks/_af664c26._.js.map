{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\r\nimport { twMerge } from 'tailwind-merge'\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n        destructive:\r\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n        outline:\r\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\r\n        secondary:\r\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n        ghost:\r\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\r\n        link: 'text-primary underline-offset-4 hover:underline',\r\n      },\r\n      size: {\r\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\r\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\r\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\r\n        icon: 'size-9',\r\n        'icon-sm': 'size-8',\r\n        'icon-lg': 'size-10',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      size: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<'button'> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : 'button'\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\r\n  return (\r\n    <input\r\n      type={type}\r\n      data-slot=\"input\"\r\n      className={cn(\r\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\r\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\r\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,6LAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn('leading-none font-semibold', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn('text-muted-foreground text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn('px-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS"}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/components/chat-bubble.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect, useRef, memo } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport { Copy, Share2, Trash2, MoreVertical, Image as ImageIcon } from 'lucide-react'\r\nimport { Button } from '@/components/ui/button'\r\n\r\ninterface ChatBubbleProps {\n  message: string\n  sender: string\n  avatar: string\n  showAvatar?: boolean\n  isOwn?: boolean\n  timestamp?: string\n  reactions?: { emoji: string; count: number }[]\n  messageId?: string\n  onDelete?: (messageId: string) => void\n  mediaUrl?: string\n  mediaType?: string\n}\n\r\nfunction ChatBubbleComponent({\r\n  message,\n  sender,\n  avatar,\n  showAvatar = true,\n  isOwn = false,\n  timestamp,\n  reactions = [],\n  messageId,\n  onDelete,\n  mediaUrl,\n  mediaType,\n}: ChatBubbleProps) {\n  const [showMenu, setShowMenu] = useState(false)\r\n  const [menuUp, setMenuUp] = useState(false)\r\n  const [menuLeft, setMenuLeft] = useState(0)\r\n  const [menuTop, setMenuTop] = useState(0)\r\n  const anchorRectRef = useRef<DOMRect | null>(null)\r\n  const menuRef = useRef<HTMLDivElement | null>(null)\r\n\r\n  const handleCopy = () => {\r\n    navigator.clipboard.writeText(message)\r\n    setShowMenu(false)\r\n  }\r\n\r\n  const handleShare = async () => {\r\n    if (navigator.share) {\r\n      try {\r\n        await navigator.share({\r\n          title: `Message from ${sender}`,\r\n          text: message,\r\n        })\r\n        setShowMenu(false)\r\n      } catch (err) {\r\n        // User cancelled or error - fallback to copy\r\n        handleCopy()\r\n      }\r\n    } else {\r\n      handleCopy()\r\n    }\r\n  }\r\n\r\n  const handleDelete = () => {\r\n    if (messageId && onDelete && confirm('Are you sure you want to delete this message?')) {\r\n      onDelete(messageId)\r\n      setShowMenu(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (showMenu && menuUp && anchorRectRef.current && menuRef.current) {\r\n      const h = menuRef.current.getBoundingClientRect().height\r\n      const top = anchorRectRef.current.top - 8 - h\r\n      setMenuTop(Math.max(8, top))\r\n    }\r\n  }, [showMenu, menuUp])\r\n\r\n  return (\n    <div\n      className={`flex gap-1.5 sm:gap-3 mb-2 sm:mb-4 group ${isOwn ? 'flex-row-reverse' : ''}`}\n      style={{ contentVisibility: 'auto', containIntrinsicSize: '160px' }}\n      data-message-id={messageId}\n    >\n      {showAvatar && (\n        <img\n          src={avatar || \"/placeholder.svg\"}\n          alt={sender}\n          className=\"w-6 h-6 sm:w-8 sm:h-8 rounded-full flex-shrink-0\"\n        />\n      )}\n      <div className={`flex flex-col ${isOwn ? 'items-end' : 'items-start'} flex-1 min-w-0`}>\r\n        <p className=\"text-[10px] sm:text-xs text-foreground/50 px-1.5 sm:px-3 mb-0.5 sm:mb-1\">{sender}</p>\r\n        <div className={`relative max-w-[80%] sm:max-w-xs md:max-w-md px-2.5 sm:px-4 py-1.5 sm:py-3 rounded-2xl sm:rounded-3xl ${\r\n          isOwn\r\n            ? 'bg-primary text-primary-foreground rounded-br-sm'\r\n            : 'bg-secondary text-secondary-foreground rounded-bl-sm'\r\n        }`}>\r\n          <p className=\"break-words text-xs sm:text-base leading-relaxed\">{message}</p>\r\n          \r\n          {/* Media Display */}\r\n          {mediaUrl && mediaType?.startsWith('image/') && (\r\n            <div className=\"mt-2 rounded-lg overflow-hidden max-w-full\">\r\n              <img\r\n                src={mediaUrl}\r\n                alt=\"Shared image\"\r\n                className=\"max-w-full h-auto rounded-lg cursor-pointer\"\r\n                onClick={() => window.open(mediaUrl, '_blank')}\r\n              />\r\n            </div>\r\n          )}\r\n          {mediaUrl && !mediaType?.startsWith('image/') && (\r\n            <div className=\"mt-2\">\r\n              <a\r\n                href={mediaUrl}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className=\"text-xs sm:text-sm text-primary hover:underline flex items-center gap-1\"\r\n              >\r\n                <ImageIcon className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                View attachment\r\n              </a>\r\n            </div>\r\n          )}\r\n          \r\n          {/* Menu button - positioned inside bubble */}\r\n          <div className={`absolute ${isOwn ? '-top-3 -right-3' : '-top-3 -left-3'} z-10`}>\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className={`h-6 w-6 sm:h-7 sm:w-7 rounded-full ${isOwn ? 'bg-primary text-primary-foreground' : 'bg-secondary text-secondary-foreground'} shadow-md border border-border/40 hover:brightness-110`}\r\n              onClick={(e) => {\r\n                e.stopPropagation()\r\n                try {\r\n                  const rect = (e.currentTarget as HTMLElement).getBoundingClientRect()\r\n                  anchorRectRef.current = rect\r\n                  const spaceBelow = window.innerHeight - rect.bottom\r\n                  setMenuUp(spaceBelow < 160)\r\n                  const left = Math.min(Math.max(8, rect.left), window.innerWidth - 168)\r\n                  const top = rect.bottom + 8\r\n                  setMenuLeft(left)\r\n                  setMenuTop(top)\r\n                } catch {}\r\n                setShowMenu((v) => !v)\r\n              }}\r\n            >\r\n              <MoreVertical className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\r\n            </Button>\r\n          </div>\r\n          \r\n          {/* Menu Dropdown - Works for both mobile and desktop */}\r\n          {showMenu && createPortal((\r\n            <>\r\n              <div \r\n                className=\"fixed inset-0 z-[60] bg-background/30 backdrop-blur-[1px]\"\r\n                onClick={() => setShowMenu(false)}\r\n              />\r\n              <div\r\n                ref={menuRef}\r\n                className={`fixed bg-card border border-border rounded-lg shadow-lg p-1 z-[70] min-w-[160px]`}\r\n                style={{ left: menuLeft, top: menuTop }}\r\n              >\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation()\r\n                    handleCopy()\r\n                  }}\r\n                  data-action=\"copy\"\r\n                  data-message-id={messageId}\r\n                  className=\"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-accent active:bg-accent/80 rounded-md transition-colors text-foreground\"\r\n                >\r\n                  <Copy className=\"w-4 h-4\" />\r\n                  Copy\r\n                </button>\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation()\r\n                    handleShare()\r\n                  }}\r\n                  data-action=\"share\"\r\n                  data-message-id={messageId}\r\n                  className=\"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-accent active:bg-accent/80 rounded-md transition-colors text-foreground\"\r\n                >\r\n                  <Share2 className=\"w-4 h-4\" />\r\n                  Share\r\n                </button>\r\n                {isOwn && onDelete && (\r\n                  <button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation()\r\n                      handleDelete()\r\n                    }}\r\n                    data-action=\"delete\"\r\n                    data-message-id={messageId}\r\n                    className=\"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-destructive/10 active:bg-destructive/20 text-destructive rounded-md transition-colors\"\r\n                  >\r\n                    <Trash2 className=\"w-4 h-4\" />\r\n                    Delete\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </>\r\n          ), document.body)}\r\n        </div>\r\n        <div className=\"flex gap-1 mt-0.5 sm:mt-2 px-1.5 sm:px-2 flex-wrap justify-center\">\r\n          {reactions.map((r, i) => (\r\n            <span key={i} className=\"text-[10px] sm:text-xs bg-accent/20 rounded-full px-1.5 sm:px-2 py-0.5 hover:bg-accent/40 cursor-pointer transition-colors\">\r\n              {r.emoji} {r.count > 1 ? r.count : ''}\r\n            </span>\r\n          ))}\r\n        </div>\r\n        {timestamp && <p className=\"text-[10px] sm:text-xs text-foreground/40 mt-0.5 sm:mt-1 px-1.5 sm:px-2\">{timestamp}</p>}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport const ChatBubble = memo(ChatBubbleComponent)\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 579, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/components/theme-toggle.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Moon, Sun } from 'lucide-react'\r\n\r\nexport function ThemeToggle() {\r\n  const [isDark, setIsDark] = useState(false)\r\n  const [mounted, setMounted] = useState(false)\r\n\r\n  useEffect(() => {\r\n    setMounted(true)\r\n    // Check system preference or stored preference\r\n    const isDarkMode = localStorage.getItem('theme') === 'dark' ||\r\n      (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)\r\n    setIsDark(isDarkMode)\r\n    if (isDarkMode) {\r\n      document.documentElement.classList.add('dark')\r\n    }\r\n  }, [])\r\n\r\n  const toggleTheme = () => {\r\n    const newIsDark = !isDark\r\n    setIsDark(newIsDark)\r\n    \r\n    if (newIsDark) {\r\n      document.documentElement.classList.add('dark')\r\n      localStorage.setItem('theme', 'dark')\r\n    } else {\r\n      document.documentElement.classList.remove('dark')\r\n      localStorage.setItem('theme', 'light')\r\n    }\r\n  }\r\n\r\n  if (!mounted) return null\r\n\r\n  return (\r\n    <Button\r\n      variant=\"ghost\"\r\n      size=\"icon\"\r\n      onClick={toggleTheme}\r\n      className=\"rounded-full hover:bg-accent/20\"\r\n    >\r\n      {isDark ? (\r\n        <Sun className=\"w-5 h-5 text-yellow-400\" />\r\n      ) : (\r\n        <Moon className=\"w-5 h-5 text-slate-600\" />\r\n      )}\r\n    </Button>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;;;AAJA;;;;AAMO,SAAS;;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;iCAAC;YACR,WAAW;YACX,+CAA+C;YAC/C,MAAM,aAAa,aAAa,OAAO,CAAC,aAAa,UAClD,CAAC,aAAa,OAAO,CAAC,YAAY,OAAO,UAAU,CAAC,gCAAgC,OAAO;YAC9F,UAAU;YACV,IAAI,YAAY;gBACd,SAAS,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC;YACzC;QACF;gCAAG,EAAE;IAEL,MAAM,cAAc;QAClB,MAAM,YAAY,CAAC;QACnB,UAAU;QAEV,IAAI,WAAW;YACb,SAAS,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC;YACvC,aAAa,OAAO,CAAC,SAAS;QAChC,OAAO;YACL,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC;YAC1C,aAAa,OAAO,CAAC,SAAS;QAChC;IACF;IAEA,IAAI,CAAC,SAAS,OAAO;IAErB,qBACE,6LAAC,wIAAM;QACL,SAAQ;QACR,MAAK;QACL,SAAS;QACT,WAAU;kBAET,uBACC,6LAAC,0MAAG;YAAC,WAAU;;;;;iCAEf,6LAAC,6MAAI;YAAC,WAAU;;;;;;;;;;;AAIxB;GA5CgB;KAAA"}},
    {"offset": {"line": 656, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/lib/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from \"@supabase/ssr\";\r\n\r\nexport function createClient() {\r\n  return createBrowserClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAII;AAJJ;AAAA;;AAEO,SAAS;IACd,OAAO,IAAA,oMAAmB;AAI5B"}},
    {"offset": {"line": 674, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/app/room/%5Bid%5D/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Card } from '@/components/ui/card'\nimport { ChatBubble } from '@/components/chat-bubble'\nimport { ThemeToggle } from '@/components/theme-toggle'\nimport { SendHorizontal, Smile, Paperclip, MoreVertical, Edit, Trash2, X } from 'lucide-react'\nimport Link from 'next/link'\nimport { createClient } from '@/lib/supabase/client'\nimport { useRouter } from 'next/navigation'\n\ninterface Message {\n  id: string\n  content: string\n  created_at: string\n  user_id: string\n  media_url?: string\n  media_type?: string\n  profiles?: {\n    username: string\n    avatar_url?: string\n  }\n}\n\ninterface Room {\n  id: string\n  name: string\n  emoji: string\n  topic: string\n  description?: string\n  member_count?: number\n  created_by?: string\n}\n\nexport default function ChatRoom({ params }: { params: Promise<{ id: string }> | { id: string } }) {\n  const [messages, setMessages] = useState<Message[]>([])\n  const [visibleCount, setVisibleCount] = useState<number>(200)\n  const [room, setRoom] = useState<Room | null>(null)\n  const [inputValue, setInputValue] = useState('')\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false)\n  const [loading, setLoading] = useState(true)\n  const [sending, setSending] = useState(false)\n  const [currentUser, setCurrentUser] = useState<any>(null)\n  const [roomId, setRoomId] = useState<string>('')\n  const [selectedFile, setSelectedFile] = useState<File | null>(null)\n  const [uploadingMedia, setUploadingMedia] = useState(false)\n  const [showRoomMenu, setShowRoomMenu] = useState(false)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n  const messagesContainerRef = useRef<HTMLDivElement>(null)\n  const sendQueueRef = useRef<any[]>([])\n  const flushTimerRef = useRef<number | null>(null)\n  const lastInputEventTimeRef = useRef<number | null>(null)\n  const fileInputRef = useRef<HTMLInputElement>(null)\n  const receivedIdsRef = useRef<Set<string>>(new Set())\n  const lastImmediateSendRef = useRef<number | null>(null)\n  const [latencies, setLatencies] = useState<number[]>([])\n  const supabase = createClient()\n  const router = useRouter()\n\n  const handleLeaveRoom = async () => {\n    try {\n      if (!currentUser?.id || !roomId) { router.push('/'); return }\n      await supabase\n        .from('room_members')\n        .delete()\n        .eq('room_id', roomId)\n        .eq('user_id', currentUser.id)\n      router.push('/')\n    } catch (e) {\n      router.push('/')\n    }\n  }\n\n  // Handle async params for Next.js 16\n  useEffect(() => {\n    const getRoomId = async () => {\n      const resolvedParams = await Promise.resolve(params)\n      setRoomId(resolvedParams.id)\n    }\n    getRoomId()\n  }, [params])\n\n  const scrollToBottom = () => {\n    requestAnimationFrame(() => {\n      messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n    })\n  }\n\n  const pushSystemMessage = (text: string) => {\n    const msg: Message = {\n      id: `sys_${Date.now()}`,\n      content: text,\n      created_at: new Date().toISOString(),\n      user_id: 'system',\n      profiles: { username: 'System' },\n    }\n    setMessages((prev) => [...prev, msg])\n    setTimeout(scrollToBottom, 100)\n  }\n\n  // Fetch room information\n  useEffect(() => {\n    if (!roomId) return\n\n    const fetchRoom = async () => {\n      try {\n        const { data, error } = await supabase\n          .from('rooms')\n          .select('*')\n          .eq('id', roomId)\n          .single()\n\n        if (error) throw error\n        setRoom(data)\n      } catch (err) {\n        console.error('Error fetching room:', err)\n        router.push('/')\n      }\n    }\n\n    fetchRoom()\n  }, [roomId, supabase, router])\n\n  // Get current user\n  useEffect(() => {\n    const getUser = async () => {\n      const { data: { user } } = await supabase.auth.getUser()\n      setCurrentUser(user)\n    }\n    getUser()\n  }, [supabase])\n\n  // Join membership on mount; attempt robust cleanup on unmount and page leave\n  useEffect(() => {\n    const join = async () => {\n      if (!roomId || !currentUser?.id) return\n      try {\n        await supabase\n          .from('room_members')\n          .delete()\n          .eq('user_id', currentUser.id)\n\n        const { data: members } = await supabase\n          .from('room_members')\n          .select('id')\n          .eq('room_id', roomId)\n\n        const currentCount = (members?.length ?? 0)\n        const max = (room as any)?.max_members ?? 8\n        if (currentCount >= max) {\n          return\n        }\n\n        await supabase\n          .from('room_members')\n          .insert({ room_id: roomId, user_id: currentUser.id })\n      } catch {}\n    }\n    join()\n\n    const cleanup = async () => {\n      if (!roomId || !currentUser?.id) return\n      try {\n        await supabase\n          .from('room_members')\n          .delete()\n          .eq('room_id', roomId)\n          .eq('user_id', currentUser.id)\n      } catch {}\n    }\n\n    let hb: number | null = null\n    const startHeartbeat = () => {\n      if (!roomId) return\n      const send = () => {\n        try {\n          fetch('/api/room-members/heartbeat', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ room_id: roomId }),\n            keepalive: true,\n          }).catch(() => {})\n        } catch {}\n      }\n      send()\n      hb = window.setInterval(send, 25_000)\n    }\n    startHeartbeat()\n\n    const sendBeaconLeave = () => {\n      if (!roomId) return\n      try {\n        const body = new Blob([JSON.stringify({ room_id: roomId })], { type: 'application/json' })\n        navigator.sendBeacon('/api/room-members/leave', body)\n      } catch {}\n    }\n\n    const onBeforeUnload = () => {\n      sendBeaconLeave()\n    }\n    const onVisibilityChange = () => {\n      if (document.visibilityState === 'hidden') sendBeaconLeave()\n    }\n    window.addEventListener('beforeunload', onBeforeUnload)\n    document.addEventListener('visibilitychange', onVisibilityChange)\n\n    return () => {\n      window.removeEventListener('beforeunload', onBeforeUnload)\n      document.removeEventListener('visibilitychange', onVisibilityChange)\n      if (hb) { try { window.clearInterval(hb) } catch {} }\n      try { cleanup() } catch {}\n    }\n  }, [roomId, currentUser, supabase, room])\n\n  // Fetch initial messages\n  useEffect(() => {\n    const ac = new AbortController()\n    const fetchMessages = async () => {\n      try {\n        const response = await fetch(`/api/chat/get-messages?room_id=${roomId}`, { signal: ac.signal })\n        if (!response.ok) throw new Error('Failed to fetch messages')\n        let data: any = []\n        try {\n          data = await response.json()\n        } catch {\n          data = []\n        }\n        performance.mark('messages_fetch_start')\n        setMessages(data || [])\n        setLoading(false)\n        requestAnimationFrame(() => {\n          performance.mark('messages_render_end')\n          performance.measure('messages_initial_render', 'messages_fetch_start', 'messages_render_end')\n        })\n        setTimeout(scrollToBottom, 100)\n      } catch (err) {\n        const name = (err as any)?.name\n        if (name !== 'AbortError') {\n          console.error('Error fetching messages:', err)\n        }\n        setLoading(false)\n      }\n    }\n\n    if (roomId) {\n      fetchMessages()\n    }\n    return () => { try { ac.abort() } catch {} }\n  }, [roomId])\n\n  // Subscribe to real-time messages\n  useEffect(() => {\n    if (!roomId) return\n\n    const channel = supabase\n      .channel(`room:${roomId}`)\n      .on(\n        'postgres_changes',\n        {\n          event: 'INSERT',\n          schema: 'public',\n          table: 'messages',\n          filter: `room_id=eq.${roomId}`,\n        },\n        async (payload) => {\n          if (receivedIdsRef.current.has(payload.new.id)) { return }\n          // Fetch the new message with profile data\n          const { data: newMessage } = await supabase\n            .from('messages')\n            .select(`\n              *,\n              profiles (username, avatar_url)\n            `)\n            .eq('id', payload.new.id)\n            .single()\n\n          if (newMessage) {\n            receivedIdsRef.current.add(newMessage.id)\n            performance.mark('message_append_start')\n            setMessages((prev) => [...prev, newMessage])\n            requestAnimationFrame(() => {\n              performance.mark('message_append_end')\n              performance.measure('message_append_render', 'message_append_start', 'message_append_end')\n            })\n            setTimeout(scrollToBottom, 100)\n          }\n        }\n      )\n      .subscribe()\n\n    return () => {\n      supabase.removeChannel(channel)\n    }\n  }, [roomId, supabase])\n\n  // Auto-scroll when new messages arrive\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages])\n\n  useEffect(() => {\n    const el = messagesContainerRef.current\n    if (!el) return\n    let ticking = false\n    const onScroll = () => {\n      if (!ticking) {\n        ticking = true\n        requestAnimationFrame(() => {\n          ticking = false\n        })\n      }\n    }\n    el.addEventListener('scroll', onScroll, { passive: true })\n    return () => {\n      el.removeEventListener('scroll', onScroll as any)\n    }\n  }, [])\n\n  const tryGzip = async (data: any) => {\n    try {\n      // @ts-ignore\n      if (typeof CompressionStream !== 'undefined') {\n        // @ts-ignore\n        const cs = new CompressionStream('gzip')\n        const blob = new Blob([JSON.stringify(data)], { type: 'application/json' })\n        const stream = blob.stream().pipeThrough(cs)\n        const compressed = await new Response(stream).arrayBuffer()\n        return new Uint8Array(compressed)\n      }\n    } catch {}\n    return null\n  }\n\n  const flushQueue = async () => {\n    if (!sendQueueRef.current.length) return\n    const batch = sendQueueRef.current.splice(0, sendQueueRef.current.length)\n    if (batch.length === 1) {\n      const m = batch[0]\n      const clientTs = m.client_ts || performance.now()\n      const response = await fetch('/api/chat/send-message', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ room_id: roomId, content: m.content, media_url: m.media_url || null, media_type: m.media_type || null, client_ts: clientTs }),\n      })\n      if (response.ok) {\n        const t = Math.round(performance.now() - clientTs)\n        try { console.log('send_latency_ms', t) } catch {}\n        setLatencies((prev) => { const arr = prev.slice(-49); arr.push(t); return arr })\n        return\n      }\n      try {\n        const err = await response.json()\n        console.error('Send error:', err)\n        if ((response.status === 401 || response.status === 403)) {\n          pushSystemMessage('Create an account to send messages')\n        } else {\n          pushSystemMessage('Message failed to send. Please try again')\n        }\n      } catch {\n        pushSystemMessage('Message failed to send. Please try again')\n      }\n      return\n    }\n    const gz = await tryGzip({ room_id: roomId, messages: batch })\n    const response = await fetch('/api/chat/send-batch', {\n      method: 'POST',\n      headers: gz ? { 'Content-Encoding': 'gzip' } : { 'Content-Type': 'application/json' },\n      body: gz ? (gz as any) : JSON.stringify({ room_id: roomId, messages: batch }),\n    })\n    if (response.ok) {\n      let data: any = null\n      try { data = await response.json() } catch { data = null }\n      const items: any[] = data?.data || []\n      items.forEach((row) => {\n        const tmpId = row?.tmp_id\n        if (row?.id && tmpId) {\n          receivedIdsRef.current.add(row.id)\n          const t = Math.round(performance.now() - (row.client_ts || performance.now()))\n          try { console.log('send_latency_ms', t) } catch {}\n          setLatencies((prev) => { const arr = prev.slice(-49); arr.push(t); return arr })\n          const finalMsg: Message = { ...row, profiles: { username: 'You' } }\n          setMessages((prev) => {\n            const map = new Map(prev.map((m) => [m.id, m]))\n            map.delete(tmpId)\n            map.set(finalMsg.id, finalMsg)\n            return Array.from(map.values())\n          })\n        }\n      })\n      return\n    }\n    try {\n      const err = await response.json()\n      console.error('Batch send error:', err)\n      if ((response.status === 401 || response.status === 403)) {\n        pushSystemMessage('Create an account to send messages')\n      } else {\n        pushSystemMessage('Message failed to send. Please try again')\n      }\n    } catch {\n      pushSystemMessage('Message failed to send. Please try again')\n    }\n  }\n\n  const scheduleFlush = () => {\n    if (flushTimerRef.current) return\n    flushTimerRef.current = setTimeout(() => {\n      flushTimerRef.current = null\n      flushQueue()\n    }, 180) as unknown as number\n  }\n\n  const enqueueMessage = (payload: { content: string; media_url?: string | null; media_type?: string | null; client_ts?: number; tmp_id?: string }) => {\n    sendQueueRef.current.push(payload)\n    scheduleFlush()\n  }\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]\n    if (!file) return\n    if (isGuestUser) { pushSystemMessage('Create an account to upload images'); return }\n\n    // Validate file type\n    const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp']\n    if (!validTypes.includes(file.type)) {\n      alert('Please select an image file (JPEG, PNG, GIF, or WebP)')\n      return\n    }\n\n    // Validate file size (max 5MB)\n    const maxSize = 5 * 1024 * 1024\n    if (file.size > maxSize) {\n      alert('File size must be less than 5MB')\n      return\n    }\n\n    setSelectedFile(file)\n  }\n\n  const handleSendMessage = async () => {\n    if ((!inputValue.trim() && !selectedFile) || !currentUser || sending) return\n\n    setSending(true)\n    setUploadingMedia(true)\n    let mediaUrl: string | null = null\n    let mediaType: string | null = null\n    const tempId = `tmp_${Date.now()}`\n    const optimistic: Message = {\n      id: tempId,\n      content: inputValue.trim() || (selectedFile ? 'üì∑ Photo' : ''),\n      created_at: new Date().toISOString(),\n      user_id: currentUser.id,\n      profiles: { username: 'You' },\n      media_url: selectedFile ? 'uploading' : undefined,\n      media_type: undefined,\n    }\n    setMessages((prev) => [...prev, optimistic])\n    setTimeout(scrollToBottom, 50)\n\n    try {\n      // Upload file if selected\n      if (selectedFile) {\n        if (isGuestUser) {\n          throw new Error('Media uploads are not available in Guest mode')\n        }\n        const formData = new FormData()\n        formData.append('file', selectedFile)\n        formData.append('room_id', roomId)\n\n        const uploadResponse = await fetch('/api/chat/upload-media', {\n          method: 'POST',\n          body: formData,\n        })\n\n        if (!uploadResponse.ok) {\n          throw new Error('Failed to upload media')\n        }\n\n        const uploadData = await uploadResponse.json()\n        mediaUrl = uploadData.media_url\n        mediaType = uploadData.media_type\n      }\n\n      const content = inputValue.trim() || (selectedFile ? 'üì∑ Photo' : '')\n      if (lastInputEventTimeRef.current) {\n        const latency = performance.now() - lastInputEventTimeRef.current\n        try { console.log('input_latency_ms', Math.round(latency)) } catch {}\n      }\n      const now = performance.now()\n      const withinBurst = (lastImmediateSendRef.current && (now - lastImmediateSendRef.current) < 150) || sendQueueRef.current.length > 0\n      if (withinBurst) {\n        enqueueMessage({ content, media_url: mediaUrl, media_type: mediaType, client_ts: now, tmp_id: tempId })\n      } else {\n        lastImmediateSendRef.current = now\n        const response = await fetch('/api/chat/send-message', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ room_id: roomId, content, media_url: mediaUrl || null, media_type: mediaType || null, client_ts: now }),\n        })\n        if (!response.ok) {\n          try {\n            const err = await response.json()\n            console.error('Send error:', err)\n            if ((response.status === 401 || response.status === 403)) {\n              pushSystemMessage('Create an account to send messages')\n            } else {\n              pushSystemMessage('Message failed to send. Please try again')\n            }\n          } catch {\n            pushSystemMessage('Message failed to send. Please try again')\n          }\n          setMessages((prev) => prev.filter((m) => m.id !== tempId))\n        } else {\n          let data: any = null\n          try { data = await response.json() } catch { data = null }\n          if (data?.id) {\n            receivedIdsRef.current.add(data.id)\n            const finalMsg: Message = { ...data, profiles: { username: 'You' } }\n            setMessages((prev) => {\n              const map = new Map(prev.map((m) => [m.id, m]))\n              map.delete(tempId)\n              map.set(finalMsg.id, finalMsg)\n              return Array.from(map.values())\n            })\n            const t = Math.round(performance.now() - (data.client_ts || now))\n            try { console.log('send_latency_ms', t) } catch {}\n            setLatencies((prev) => { const arr = prev.slice(-49); arr.push(t); return arr })\n          }\n        }\n      }\n\n      setInputValue('')\n      setSelectedFile(null)\n      if (fileInputRef.current) {\n        fileInputRef.current.value = ''\n      }\n      } catch (err) {\n        console.error('Error sending message:', err)\n        alert((err as any)?.message || 'Failed to send message. Please try again.')\n        setMessages((prev) => prev.filter((m) => m.id !== tempId))\n      } finally {\n        setSending(false)\n        setUploadingMedia(false)\n      }\n    }\n\n  const handleDeleteRoom = async () => {\n    if (!confirm('Are you sure you want to delete this room? This action cannot be undone.')) {\n      return\n    }\n\n    try {\n      const response = await fetch(`/api/rooms/delete?id=${roomId}`, {\n        method: 'DELETE',\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to delete room')\n      }\n\n      router.push('/')\n    } catch (err) {\n      console.error('Error deleting room:', err)\n      alert('Failed to delete room. Please try again.')\n    }\n  }\n\n  const isRoomOwner = currentUser && room && room.created_by === currentUser.id\n  const isGuestUser = !!currentUser && (((currentUser as any).is_anonymous) || ((currentUser as any).app_metadata?.provider === 'anonymous'))\n\n  const handleDeleteMessage = async (messageId: string) => {\n    try {\n      const response = await fetch(`/api/chat/delete-message?id=${messageId}`, {\n        method: 'DELETE',\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to delete message')\n      }\n\n      setMessages((prev) => prev.filter((msg) => msg.id !== messageId))\n    } catch (err) {\n      console.error('Error deleting message:', err)\n      alert('Failed to delete message. Please try again.')\n    }\n  }\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault()\n      lastInputEventTimeRef.current = performance.now()\n      handleSendMessage()\n    }\n  }\n\n  const formatTimestamp = (timestamp: string) => {\n    const date = new Date(timestamp)\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n  }\n\n  useEffect(() => {\n    const id = setInterval(() => {\n      const mem: any = (performance as any).memory\n      if (mem) {\n        try {\n          console.log('memory_mb', Math.round(mem.usedJSHeapSize / 1048576))\n        } catch {}\n      }\n    }, 5000)\n    return () => clearInterval(id)\n  }, [])\n\n  const getAvatar = (message: Message) => {\n    if (message.profiles?.avatar_url) {\n      return message.profiles.avatar_url\n    }\n    const username = message.profiles?.username || message.user_id || 'user'\n    if (username.startsWith('Guest')) return ''\n    return `https://api.dicebear.com/7.x/avataaars/svg?seed=${username}`\n  }\n\n  const getSenderName = (message: Message) => {\n    return message.profiles?.username || 'Anonymous'\n  }\n\n  const emojis = ['üòä', 'üòÇ', 'üéâ', '‚ù§Ô∏è', 'üî•', 'üëç', 'üéÆ', 'üéµ', '‚ú®', 'üíØ']\n\n  if (loading) {\n    return (\n      <div className=\"h-screen flex items-center justify-center bg-background\">\n        <div className=\"text-center\">\n          <div className=\"w-12 h-12 border-4 border-primary/20 border-t-primary rounded-full animate-spin mx-auto mb-4\" />\n          <p className=\"text-foreground/60\">Loading chat room...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (!room) {\n    return (\n      <div className=\"h-screen flex items-center justify-center bg-background\">\n        <div className=\"text-center\">\n          <p className=\"text-foreground/60 mb-4\">Room not found</p>\n          <Link href=\"/\">\n            <Button>Go Home</Button>\n          </Link>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"h-screen flex flex-col bg-background\">\n      {/* Header - Mobile responsive */}\n      <header className=\"border-b border-border sticky top-0 z-40 bg-background/95 backdrop-blur-sm\">\n        <div className=\"max-w-6xl mx-auto px-2 sm:px-4 py-2 sm:py-4 flex items-center justify-between gap-1.5 sm:gap-2\">\n          <div className=\"flex items-center gap-1.5 sm:gap-4 min-w-0 flex-1\">\n            <Link href=\"/\" className=\"hover:opacity-70 transition-opacity flex-shrink-0\">\n              <h1 className=\"text-base sm:text-xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent\">\n                ChatBloom\n              </h1>\n            </Link>\n            <div className=\"hidden sm:flex items-center gap-2 pl-4 border-l border-border\">\n              <div className=\"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-primary to-secondary rounded-2xl flex items-center justify-center text-lg sm:text-xl flex-shrink-0\">\n                {room.emoji || 'üí¨'}\n              </div>\n              <div className=\"min-w-0\">\n                <h2 className=\"font-bold text-base sm:text-lg truncate\">{room.name}</h2>\n                <p className=\"text-xs text-foreground/60 truncate\">{room.topic}</p>\n              </div>\n            </div>\n            {/* Mobile room info */}\n            <div className=\"sm:hidden flex items-center gap-1.5 min-w-0 flex-1\">\n              <div className=\"w-7 h-7 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center text-sm flex-shrink-0\">\n                {room.emoji || 'üí¨'}\n              </div>\n              <div className=\"min-w-0\">\n                <h2 className=\"font-bold text-xs truncate\">{room.name}</h2>\n              </div>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-0.5 sm:gap-2 flex-shrink-0\">\n            <ThemeToggle />\n            {process.env.NODE_ENV === 'development' && latencies.length > 0 && (\n              <div className=\"ml-1 sm:ml-2 px-2 py-1 rounded-full text-xs bg-primary/10 text-foreground/70\">\n                {`avg ${Math.round(latencies.reduce((a,b)=>a+b,0)/latencies.length)}ms`}\n                {` ‚Ä¢ max ${Math.max(...latencies)}ms`}\n                {` ‚Ä¢ out ${latencies.filter((l)=>l > (latencies.reduce((a,b)=>a+b,0)/latencies.length)*1.7).length}`}\n              </div>\n            )}\n            <div className=\"relative\">\n              <Button \n                variant=\"ghost\" \n                size=\"icon\" \n                className=\"rounded-full h-8 w-8 sm:h-10 sm:w-10\"\n                onClick={() => setShowRoomMenu(!showRoomMenu)}\n              >\n                <MoreVertical className=\"w-3.5 h-3.5 sm:w-5 sm:h-5\" />\n              </Button>\n              {currentUser && (\n                <Button variant=\"outline\" size=\"sm\" className=\"rounded-full ml-1\" onClick={handleLeaveRoom}>\n                  Leave\n                </Button>\n              )}\n              {showRoomMenu && isRoomOwner && (\n                <>\n                  <div \n                    className=\"fixed inset-0 z-[5] bg-background/20\"\n                    onClick={() => setShowRoomMenu(false)}\n                  />\n                  <div className=\"absolute right-0 top-12 bg-card border border-border rounded-lg shadow-lg p-1 z-10 min-w-[140px]\">\n                    <Link href={`/room/${roomId}/edit`}>\n                      <button className=\"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-accent active:bg-accent/80 rounded-md transition-colors\">\n                        <Edit className=\"w-4 h-4\" />\n                        Edit Room\n                      </button>\n                    </Link>\n                    <button\n                      onClick={() => {\n                        setShowRoomMenu(false)\n                        handleDeleteRoom()\n                      }}\n                      className=\"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-destructive/10 active:bg-destructive/20 text-destructive rounded-md transition-colors\"\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                      Delete Room\n                    </button>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Messages Container - Mobile responsive */}\n      <div ref={messagesContainerRef} className=\"flex-1 overflow-y-auto p-1.5 sm:p-4 md:p-6 space-y-1 sm:space-y-4\">\n        <div\n          className=\"max-w-4xl mx-auto\"\n          onClick={(e) => {\n            const target = e.target as HTMLElement\n            const actionEl = target.closest('[data-action]') as HTMLElement | null\n            if (actionEl) {\n              const action = actionEl.getAttribute('data-action')\n              const id = actionEl.getAttribute('data-message-id')\n              if (action === 'delete' && id) {\n                handleDeleteMessage(id)\n              }\n            }\n          }}\n        >\n          {messages.length === 0 ? (\n            <div className=\"text-center py-8 sm:py-12\">\n              <p className=\"text-foreground/60 text-sm sm:text-base\">No messages yet. Be the first to say something!</p>\n            </div>\n          ) : (\n            (() => {\n              const start = Math.max(0, messages.length - visibleCount)\n              const visible = messages.slice(start)\n              return (\n                <>\n                  {start > 0 && (\n                    <div className=\"flex justify-center py-2\">\n                      <Button variant=\"outline\" size=\"sm\" className=\"rounded-full\" onClick={() => setVisibleCount((c) => c + 200)}>\n                        Load older messages\n                      </Button>\n                    </div>\n                  )}\n                  {visible.map((msg) => (\n                    <ChatBubble\n                      key={msg.id}\n                      message={msg.content}\n                      sender={getSenderName(msg)}\n                      avatar={getAvatar(msg)}\n                      showAvatar={!(msg.profiles?.username || '').startsWith('Guest')}\n                      isOwn={currentUser?.id === msg.user_id}\n                      timestamp={formatTimestamp(msg.created_at)}\n                      reactions={[]}\n                      messageId={msg.id}\n                      onDelete={handleDeleteMessage}\n                      mediaUrl={msg.media_url}\n                      mediaType={msg.media_type}\n                    />\n                  ))}\n                </>\n              )\n            })()\n          )}\n          <div ref={messagesEndRef} />\n        </div>\n      </div>\n\n      {/* Input Section - Mobile responsive */}\n      {!currentUser ? (\n        <div className=\"border-t border-border bg-background p-2 sm:p-4 text-center\">\n          <p className=\"text-foreground/60 mb-1.5 sm:mb-2 text-xs sm:text-base\">Please sign in to send messages</p>\n          <Link href=\"/auth\">\n            <Button size=\"sm\" className=\"text-xs sm:text-sm h-7 sm:h-9\">Sign In</Button>\n          </Link>\n        </div>\n      ) : (\n        <div className=\"border-t border-border bg-background sticky bottom-0 p-2 sm:p-4 md:p-6\">\n          <div className=\"max-w-4xl mx-auto\">\n            {/* Emoji Picker */}\n            {showEmojiPicker && (\n              <Card className=\"mb-2 sm:mb-4 p-2 sm:p-4 bg-card\">\n                <div className=\"grid grid-cols-6 sm:grid-cols-5 gap-1.5 sm:gap-2\">\n                  {emojis.map((emoji) => (\n                    <button\n                      key={emoji}\n                      onClick={() => {\n                        setInputValue(inputValue + emoji)\n                        setShowEmojiPicker(false)\n                      }}\n                      className=\"text-xl sm:text-2xl hover:scale-125 transition-transform p-1 sm:p-2\"\n                    >\n                      {emoji}\n                    </button>\n                  ))}\n                </div>\n              </Card>\n            )}\n\n            {/* Selected File Preview */}\n            {selectedFile && (\n              <div className=\"mb-2 relative inline-block\">\n                <div className=\"relative w-20 h-20 sm:w-24 sm:h-24 rounded-lg overflow-hidden border border-border\">\n                  <img\n                    src={URL.createObjectURL(selectedFile)}\n                    alt=\"Preview\"\n                    className=\"w-full h-full object-cover\"\n                  />\n                  <button\n                    onClick={() => {\n                      setSelectedFile(null)\n                      if (fileInputRef.current) fileInputRef.current.value = ''\n                    }}\n                    className=\"absolute top-1 right-1 bg-destructive text-destructive-foreground rounded-full p-1 hover:bg-destructive/90\"\n                  >\n                    <X className=\"w-3 h-3\" />\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {/* Input Field - Mobile responsive */}\n            <div className=\"flex gap-1 sm:gap-2 items-end\">\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                accept=\"image/*\"\n                onChange={handleFileSelect}\n                className=\"hidden\"\n              />\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"rounded-full h-8 w-8 sm:h-10 sm:w-10\"\n                onClick={() => setShowEmojiPicker(!showEmojiPicker)}\n              >\n                <Smile className=\"w-3.5 h-3.5 sm:w-5 sm:h-5\" />\n              </Button>\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"rounded-full h-8 w-8 sm:h-10 sm:w-10\"\n                onClick={() => { if (isGuestUser) { pushSystemMessage('Create an account to upload images'); } else { fileInputRef.current?.click() } }}\n                disabled={uploadingMedia}\n              >\n                <Paperclip className=\"w-3.5 h-3.5 sm:w-5 sm:h-5\" />\n              </Button>\n              <Input\n                placeholder=\"Type a message...\"\n                value={inputValue}\n                onChange={(e) => setInputValue(e.target.value)}\n                onKeyPress={handleKeyPress}\n                className=\"rounded-full px-3 sm:px-6 py-1.5 sm:py-2 text-xs sm:text-base flex-1 min-w-0 h-8 sm:h-10\"\n                disabled={sending || uploadingMedia}\n              />\n              <Button\n                onClick={() => {\n                  lastInputEventTimeRef.current = performance.now()\n                  handleSendMessage()\n                }}\n                className=\"bg-primary hover:bg-primary/90 rounded-full h-8 w-8 sm:h-10 sm:w-10 flex-shrink-0\"\n                size=\"icon\"\n                disabled={sending || uploadingMedia || (!inputValue.trim() && !selectedFile)}\n              >\n                {uploadingMedia ? (\n                  <div className=\"w-3.5 h-3.5 sm:w-5 sm:h-5 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                ) : (\n                  <SendHorizontal className=\"w-3.5 h-3.5 sm:w-5 sm:h-5\" />\n                )}\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}