{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/app/auth/callback/route.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr'\r\nimport { NextResponse, type NextRequest } from 'next/server'\r\n\r\nexport async function GET(request: NextRequest) {\r\n  const { searchParams, origin } = new URL(request.url)\r\n  const code = searchParams.get('code')\r\n  const next = searchParams.get('next') ?? '/'\r\n\r\n  if (code) {\r\n    const cookiesToSet: Array<{ name: string; value: string; options?: any }> = []\r\n    let supabaseResponse = NextResponse.next({\r\n      request,\r\n    })\r\n\r\n    const supabase = createServerClient(\r\n      process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n      process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n      {\r\n        cookies: {\r\n          getAll() {\r\n            return request.cookies.getAll()\r\n          },\r\n          setAll(newCookies) {\r\n            newCookies.forEach(({ name, value, options }) => {\r\n              request.cookies.set(name, value)\r\n              cookiesToSet.push({ name, value, options })\r\n            })\r\n            supabaseResponse = NextResponse.next({\r\n              request,\r\n            })\r\n            newCookies.forEach(({ name, value, options }) =>\r\n              supabaseResponse.cookies.set(name, value, options)\r\n            )\r\n          },\r\n        },\r\n      }\r\n    )\r\n\r\n    const { error } = await supabase.auth.exchangeCodeForSession(code)\r\n    if (!error) {\r\n      const forwardedHost = request.headers.get('x-forwarded-host')\r\n      const isLocalEnv = process.env.NODE_ENV === 'development'\r\n      \r\n      let redirectUrl = `${origin}${next}`\r\n      if (!isLocalEnv && forwardedHost) {\r\n        redirectUrl = `https://${forwardedHost}${next}`\r\n      }\r\n      \r\n      // Create redirect response and apply all cookies\r\n      const redirectResponse = NextResponse.redirect(redirectUrl)\r\n      cookiesToSet.forEach(({ name, value, options }) => {\r\n        redirectResponse.cookies.set(name, value, options)\r\n      })\r\n      \r\n      return redirectResponse\r\n    }\r\n  }\r\n\r\n  // return the user to an error page with instructions\r\n  return NextResponse.redirect(`${origin}/auth?error=auth_callback_error`)\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IACpD,MAAM,OAAO,aAAa,GAAG,CAAC;IAC9B,MAAM,OAAO,aAAa,GAAG,CAAC,WAAW;IAEzC,IAAI,MAAM;QACR,MAAM,eAAsE,EAAE;QAC9E,IAAI,mBAAmB,gJAAY,CAAC,IAAI,CAAC;YACvC;QACF;QAEA,MAAM,WAAW,IAAA,iMAAkB,sUAGjC;YACE,SAAS;gBACP;oBACE,OAAO,QAAQ,OAAO,CAAC,MAAM;gBAC/B;gBACA,QAAO,UAAU;oBACf,WAAW,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE;wBAC1C,QAAQ,OAAO,CAAC,GAAG,CAAC,MAAM;wBAC1B,aAAa,IAAI,CAAC;4BAAE;4BAAM;4BAAO;wBAAQ;oBAC3C;oBACA,mBAAmB,gJAAY,CAAC,IAAI,CAAC;wBACnC;oBACF;oBACA,WAAW,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC1C,iBAAiB,OAAO,CAAC,GAAG,CAAC,MAAM,OAAO;gBAE9C;YACF;QACF;QAGF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,sBAAsB,CAAC;QAC7D,IAAI,CAAC,OAAO;YACV,MAAM,gBAAgB,QAAQ,OAAO,CAAC,GAAG,CAAC;YAC1C,MAAM,aAAa,oDAAyB;YAE5C,IAAI,cAAc,GAAG,SAAS,MAAM;YACpC,IAAI,CAAC,cAAc,eAAe;gBAChC,cAAc,CAAC,QAAQ,EAAE,gBAAgB,MAAM;YACjD;YAEA,iDAAiD;YACjD,MAAM,mBAAmB,gJAAY,CAAC,QAAQ,CAAC;YAC/C,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE;gBAC5C,iBAAiB,OAAO,CAAC,GAAG,CAAC,MAAM,OAAO;YAC5C;YAEA,OAAO;QACT;IACF;IAEA,qDAAqD;IACrD,OAAO,gJAAY,CAAC,QAAQ,CAAC,GAAG,OAAO,+BAA+B,CAAC;AACzE"}}]
}