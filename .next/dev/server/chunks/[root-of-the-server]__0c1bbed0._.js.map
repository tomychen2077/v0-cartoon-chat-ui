{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\";\r\nimport { cookies } from \"next/headers\";\r\n\r\nexport async function createClient() {\r\n  const cookieStore = await cookies();\r\n\r\n  return createServerClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n    {\r\n      cookies: {\r\n        getAll() {\r\n          return cookieStore.getAll();\r\n        },\r\n        setAll(cookiesToSet) {\r\n          try {\r\n            cookiesToSet.forEach(({ name, value, options }) =>\r\n              cookieStore.set(name, value, options),\r\n            );\r\n          } catch {\r\n            // Ignore if called from Server Component\r\n          }\r\n        },\r\n      },\r\n    },\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,4IAAO;IAEjC,OAAO,IAAA,iMAAkB,sUAGvB;QACE,SAAS;YACP;gBACE,OAAO,YAAY,MAAM;YAC3B;YACA,QAAO,YAAY;gBACjB,IAAI;oBACF,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC5C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAEjC,EAAE,OAAM;gBACN,yCAAyC;gBAC3C;YACF;QACF;IACF;AAEJ"}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/app/api/friends/get/route.ts"],"sourcesContent":["import { createClient } from '@/lib/supabase/server'\r\nimport { NextRequest, NextResponse } from 'next/server'\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const supabase = await createClient()\r\n    \r\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\r\n    if (authError || !user) {\r\n      return NextResponse.json(\r\n        { error: 'Unauthorized' },\r\n        { status: 401 }\r\n      )\r\n    }\r\n\r\n    const { searchParams } = new URL(request.url)\r\n    const status = searchParams.get('status') || 'accepted'\r\n\r\n    // Get friends where user is either user_id or friend_id\r\n    const { data: friends, error } = await supabase\r\n      .from('friends')\r\n      .select(`\r\n        *,\r\n        user:profiles!user_id(id, username, display_name, avatar_url, bio),\r\n        friend:profiles!friend_id(id, username, display_name, avatar_url, bio)\r\n      `)\r\n      .or(`user_id.eq.${user.id},friend_id.eq.${user.id}`)\r\n      .eq('status', status)\r\n\r\n    if (error) throw error\r\n\r\n    // Transform to include friend profile info\r\n    const friendsList = friends?.map((f: any) => {\n      const friendProfile = f.user_id === user.id ? f.friend : f.user\n      return {\n        id: f.id,\n        friend_id: friendProfile?.id || (f.user_id === user.id ? f.friend_id : f.user_id),\n        username: friendProfile?.username || 'Unknown',\n        display_name: friendProfile?.display_name || friendProfile?.username || 'Unknown',\n        avatar_url: friendProfile?.avatar_url,\n        bio: friendProfile?.bio,\n        status: f.status,\n        created_at: f.created_at,\n        user_id: f.user_id,\n        friend_id_raw: f.friend_id,\n      }\n    }) || []\n\r\n    return NextResponse.json({ friends: friendsList })\r\n  } catch (error) {\r\n    console.error('Error getting friends:', error)\r\n    return NextResponse.json(\r\n      { error: 'Internal server error' },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,WAAW,MAAM,IAAA,2IAAY;QAEnC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;QACxE,IAAI,aAAa,CAAC,MAAM;YACtB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAe,GACxB;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;QAC5C,MAAM,SAAS,aAAa,GAAG,CAAC,aAAa;QAE7C,wDAAwD;QACxD,MAAM,EAAE,MAAM,OAAO,EAAE,KAAK,EAAE,GAAG,MAAM,SACpC,IAAI,CAAC,WACL,MAAM,CAAC,CAAC;;;;MAIT,CAAC,EACA,EAAE,CAAC,CAAC,WAAW,EAAE,KAAK,EAAE,CAAC,cAAc,EAAE,KAAK,EAAE,EAAE,EAClD,EAAE,CAAC,UAAU;QAEhB,IAAI,OAAO,MAAM;QAEjB,2CAA2C;QAC3C,MAAM,cAAc,SAAS,IAAI,CAAC;YAChC,MAAM,gBAAgB,EAAE,OAAO,KAAK,KAAK,EAAE,GAAG,EAAE,MAAM,GAAG,EAAE,IAAI;YAC/D,OAAO;gBACL,IAAI,EAAE,EAAE;gBACR,WAAW,eAAe,MAAM,CAAC,EAAE,OAAO,KAAK,KAAK,EAAE,GAAG,EAAE,SAAS,GAAG,EAAE,OAAO;gBAChF,UAAU,eAAe,YAAY;gBACrC,cAAc,eAAe,gBAAgB,eAAe,YAAY;gBACxE,YAAY,eAAe;gBAC3B,KAAK,eAAe;gBACpB,QAAQ,EAAE,MAAM;gBAChB,YAAY,EAAE,UAAU;gBACxB,SAAS,EAAE,OAAO;gBAClB,eAAe,EAAE,SAAS;YAC5B;QACF,MAAM,EAAE;QAER,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAY;IAClD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwB,GACjC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}