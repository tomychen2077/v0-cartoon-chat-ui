{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\r\nimport { twMerge } from 'tailwind-merge'\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n        destructive:\r\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n        outline:\r\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\r\n        secondary:\r\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n        ghost:\r\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\r\n        link: 'text-primary underline-offset-4 hover:underline',\r\n      },\r\n      size: {\r\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\r\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\r\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\r\n        icon: 'size-9',\r\n        'icon-sm': 'size-8',\r\n        'icon-lg': 'size-10',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      size: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<'button'> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : 'button'\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\r\n  return (\r\n    <input\r\n      type={type}\r\n      data-slot=\"input\"\r\n      className={cn(\r\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\r\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\r\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn('leading-none font-semibold', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn('text-muted-foreground text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn('px-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/components/chat-bubble.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect, useRef, memo } from 'react'\r\nimport { createPortal } from 'react-dom'\r\nimport { Copy, Share2, Trash2, MoreVertical, Image as ImageIcon } from 'lucide-react'\r\nimport { Button } from '@/components/ui/button'\r\n\r\ninterface ChatBubbleProps {\r\n  message: string\r\n  sender: string\r\n  avatar: string\r\n  isOwn?: boolean\r\n  timestamp?: string\r\n  reactions?: { emoji: string; count: number }[]\r\n  messageId?: string\r\n  onDelete?: (messageId: string) => void\r\n  mediaUrl?: string\r\n  mediaType?: string\r\n}\r\n\r\nfunction ChatBubbleComponent({\r\n  message,\r\n  sender,\r\n  avatar,\r\n  isOwn = false,\r\n  timestamp,\r\n  reactions = [],\r\n  messageId,\r\n  onDelete,\r\n  mediaUrl,\r\n  mediaType,\r\n}: ChatBubbleProps) {\r\n  const [showMenu, setShowMenu] = useState(false)\r\n  const [menuUp, setMenuUp] = useState(false)\r\n  const [menuLeft, setMenuLeft] = useState(0)\r\n  const [menuTop, setMenuTop] = useState(0)\r\n  const anchorRectRef = useRef<DOMRect | null>(null)\r\n  const menuRef = useRef<HTMLDivElement | null>(null)\r\n\r\n  const handleCopy = () => {\r\n    navigator.clipboard.writeText(message)\r\n    setShowMenu(false)\r\n  }\r\n\r\n  const handleShare = async () => {\r\n    if (navigator.share) {\r\n      try {\r\n        await navigator.share({\r\n          title: `Message from ${sender}`,\r\n          text: message,\r\n        })\r\n        setShowMenu(false)\r\n      } catch (err) {\r\n        // User cancelled or error - fallback to copy\r\n        handleCopy()\r\n      }\r\n    } else {\r\n      handleCopy()\r\n    }\r\n  }\r\n\r\n  const handleDelete = () => {\r\n    if (messageId && onDelete && confirm('Are you sure you want to delete this message?')) {\r\n      onDelete(messageId)\r\n      setShowMenu(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (showMenu && menuUp && anchorRectRef.current && menuRef.current) {\r\n      const h = menuRef.current.getBoundingClientRect().height\r\n      const top = anchorRectRef.current.top - 8 - h\r\n      setMenuTop(Math.max(8, top))\r\n    }\r\n  }, [showMenu, menuUp])\r\n\r\n  return (\r\n    <div\r\n      className={`flex gap-1.5 sm:gap-3 mb-2 sm:mb-4 group ${isOwn ? 'flex-row-reverse' : ''}`}\r\n      style={{ contentVisibility: 'auto', containIntrinsicSize: '160px' }}\r\n      data-message-id={messageId}\r\n    >\r\n      <img\r\n        src={avatar || \"/placeholder.svg\"}\r\n        alt={sender}\r\n        className=\"w-6 h-6 sm:w-8 sm:h-8 rounded-full flex-shrink-0\"\r\n      />\r\n      <div className={`flex flex-col ${isOwn ? 'items-end' : 'items-start'} flex-1 min-w-0`}>\r\n        <p className=\"text-[10px] sm:text-xs text-foreground/50 px-1.5 sm:px-3 mb-0.5 sm:mb-1\">{sender}</p>\r\n        <div className={`relative max-w-[80%] sm:max-w-xs md:max-w-md px-2.5 sm:px-4 py-1.5 sm:py-3 rounded-2xl sm:rounded-3xl ${\r\n          isOwn\r\n            ? 'bg-primary text-primary-foreground rounded-br-sm'\r\n            : 'bg-secondary text-secondary-foreground rounded-bl-sm'\r\n        }`}>\r\n          <p className=\"break-words text-xs sm:text-base leading-relaxed\">{message}</p>\r\n          \r\n          {/* Media Display */}\r\n          {mediaUrl && mediaType?.startsWith('image/') && (\r\n            <div className=\"mt-2 rounded-lg overflow-hidden max-w-full\">\r\n              <img\r\n                src={mediaUrl}\r\n                alt=\"Shared image\"\r\n                className=\"max-w-full h-auto rounded-lg cursor-pointer\"\r\n                onClick={() => window.open(mediaUrl, '_blank')}\r\n              />\r\n            </div>\r\n          )}\r\n          {mediaUrl && !mediaType?.startsWith('image/') && (\r\n            <div className=\"mt-2\">\r\n              <a\r\n                href={mediaUrl}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className=\"text-xs sm:text-sm text-primary hover:underline flex items-center gap-1\"\r\n              >\r\n                <ImageIcon className=\"w-3 h-3 sm:w-4 sm:h-4\" />\r\n                View attachment\r\n              </a>\r\n            </div>\r\n          )}\r\n          \r\n          {/* Menu button - positioned inside bubble */}\r\n          <div className={`absolute ${isOwn ? '-top-3 -right-3' : '-top-3 -left-3'} z-10`}>\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"icon\"\r\n              className={`h-6 w-6 sm:h-7 sm:w-7 rounded-full ${isOwn ? 'bg-primary text-primary-foreground' : 'bg-secondary text-secondary-foreground'} shadow-md border border-border/40 hover:brightness-110`}\r\n              onClick={(e) => {\r\n                e.stopPropagation()\r\n                try {\r\n                  const rect = (e.currentTarget as HTMLElement).getBoundingClientRect()\r\n                  anchorRectRef.current = rect\r\n                  const spaceBelow = window.innerHeight - rect.bottom\r\n                  setMenuUp(spaceBelow < 160)\r\n                  const left = Math.min(Math.max(8, rect.left), window.innerWidth - 168)\r\n                  const top = rect.bottom + 8\r\n                  setMenuLeft(left)\r\n                  setMenuTop(top)\r\n                } catch {}\r\n                setShowMenu((v) => !v)\r\n              }}\r\n            >\r\n              <MoreVertical className=\"w-3.5 h-3.5 sm:w-4 sm:h-4\" />\r\n            </Button>\r\n          </div>\r\n          \r\n          {/* Menu Dropdown - Works for both mobile and desktop */}\r\n          {showMenu && createPortal((\r\n            <>\r\n              <div \r\n                className=\"fixed inset-0 z-[60] bg-background/30 backdrop-blur-[1px]\"\r\n                onClick={() => setShowMenu(false)}\r\n              />\r\n              <div\r\n                ref={menuRef}\r\n                className={`fixed bg-card border border-border rounded-lg shadow-lg p-1 z-[70] min-w-[160px]`}\r\n                style={{ left: menuLeft, top: menuTop }}\r\n              >\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation()\r\n                    handleCopy()\r\n                  }}\r\n                  data-action=\"copy\"\r\n                  data-message-id={messageId}\r\n                  className=\"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-accent active:bg-accent/80 rounded-md transition-colors text-foreground\"\r\n                >\r\n                  <Copy className=\"w-4 h-4\" />\r\n                  Copy\r\n                </button>\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation()\r\n                    handleShare()\r\n                  }}\r\n                  data-action=\"share\"\r\n                  data-message-id={messageId}\r\n                  className=\"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-accent active:bg-accent/80 rounded-md transition-colors text-foreground\"\r\n                >\r\n                  <Share2 className=\"w-4 h-4\" />\r\n                  Share\r\n                </button>\r\n                {isOwn && onDelete && (\r\n                  <button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation()\r\n                      handleDelete()\r\n                    }}\r\n                    data-action=\"delete\"\r\n                    data-message-id={messageId}\r\n                    className=\"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-destructive/10 active:bg-destructive/20 text-destructive rounded-md transition-colors\"\r\n                  >\r\n                    <Trash2 className=\"w-4 h-4\" />\r\n                    Delete\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </>\r\n          ), document.body)}\r\n        </div>\r\n        <div className=\"flex gap-1 mt-0.5 sm:mt-2 px-1.5 sm:px-2 flex-wrap justify-center\">\r\n          {reactions.map((r, i) => (\r\n            <span key={i} className=\"text-[10px] sm:text-xs bg-accent/20 rounded-full px-1.5 sm:px-2 py-0.5 hover:bg-accent/40 cursor-pointer transition-colors\">\r\n              {r.emoji} {r.count > 1 ? r.count : ''}\r\n            </span>\r\n          ))}\r\n        </div>\r\n        {timestamp && <p className=\"text-[10px] sm:text-xs text-foreground/40 mt-0.5 sm:mt-1 px-1.5 sm:px-2\">{timestamp}</p>}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport const ChatBubble = memo(ChatBubbleComponent)\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 533, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/components/theme-toggle.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Moon, Sun } from 'lucide-react'\r\n\r\nexport function ThemeToggle() {\r\n  const [isDark, setIsDark] = useState(false)\r\n  const [mounted, setMounted] = useState(false)\r\n\r\n  useEffect(() => {\r\n    setMounted(true)\r\n    // Check system preference or stored preference\r\n    const isDarkMode = localStorage.getItem('theme') === 'dark' ||\r\n      (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)\r\n    setIsDark(isDarkMode)\r\n    if (isDarkMode) {\r\n      document.documentElement.classList.add('dark')\r\n    }\r\n  }, [])\r\n\r\n  const toggleTheme = () => {\r\n    const newIsDark = !isDark\r\n    setIsDark(newIsDark)\r\n    \r\n    if (newIsDark) {\r\n      document.documentElement.classList.add('dark')\r\n      localStorage.setItem('theme', 'dark')\r\n    } else {\r\n      document.documentElement.classList.remove('dark')\r\n      localStorage.setItem('theme', 'light')\r\n    }\r\n  }\r\n\r\n  if (!mounted) return null\r\n\r\n  return (\r\n    <Button\r\n      variant=\"ghost\"\r\n      size=\"icon\"\r\n      onClick={toggleTheme}\r\n      className=\"rounded-full hover:bg-accent/20\"\r\n    >\r\n      {isDark ? (\r\n        <Sun className=\"w-5 h-5 text-yellow-400\" />\r\n      ) : (\r\n        <Moon className=\"w-5 h-5 text-slate-600\" />\r\n      )}\r\n    </Button>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAJA;;;;;AAMO,SAAS;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,WAAW;QACX,+CAA+C;QAC/C,MAAM,aAAa,aAAa,OAAO,CAAC,aAAa,UAClD,CAAC,aAAa,OAAO,CAAC,YAAY,OAAO,UAAU,CAAC,gCAAgC,OAAO;QAC9F,UAAU;QACV,IAAI,YAAY;YACd,SAAS,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC;QACzC;IACF,GAAG,EAAE;IAEL,MAAM,cAAc;QAClB,MAAM,YAAY,CAAC;QACnB,UAAU;QAEV,IAAI,WAAW;YACb,SAAS,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC;YACvC,aAAa,OAAO,CAAC,SAAS;QAChC,OAAO;YACL,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC;YAC1C,aAAa,OAAO,CAAC,SAAS;QAChC;IACF;IAEA,IAAI,CAAC,SAAS,OAAO;IAErB,qBACE,8OAAC,qIAAM;QACL,SAAQ;QACR,MAAK;QACL,SAAS;QACT,WAAU;kBAET,uBACC,8OAAC,uMAAG;YAAC,WAAU;;;;;iCAEf,8OAAC,0MAAI;YAAC,WAAU;;;;;;;;;;;AAIxB"}},
    {"offset": {"line": 599, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/lib/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from \"@supabase/ssr\";\r\n\r\nexport function createClient() {\r\n  return createBrowserClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEO,SAAS;IACd,OAAO,IAAA,iMAAmB;AAI5B"}},
    {"offset": {"line": 613, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bkbil/OneDrive/Documents/GitHub/v0-cartoon-chat-ui/app/room/%5Bid%5D/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Card } from '@/components/ui/card'\r\nimport { ChatBubble } from '@/components/chat-bubble'\r\nimport { ThemeToggle } from '@/components/theme-toggle'\r\nimport { SendHorizontal, Smile, Paperclip, MoreVertical, Edit, Trash2, X } from 'lucide-react'\r\nimport Link from 'next/link'\r\nimport { createClient } from '@/lib/supabase/client'\r\nimport { useRouter } from 'next/navigation'\r\n\r\ninterface Message {\r\n  id: string\r\n  content: string\r\n  created_at: string\r\n  user_id: string\r\n  media_url?: string\r\n  media_type?: string\r\n  profiles?: {\r\n    username: string\r\n    avatar_url?: string\r\n  }\r\n}\r\n\r\ninterface Room {\r\n  id: string\r\n  name: string\r\n  emoji: string\r\n  topic: string\r\n  description?: string\r\n  member_count?: number\r\n  created_by?: string\r\n}\r\n\r\nexport default function ChatRoom({ params }: { params: Promise<{ id: string }> | { id: string } }) {\r\n  const [messages, setMessages] = useState<Message[]>([])\r\n  const [visibleCount, setVisibleCount] = useState<number>(200)\r\n  const [room, setRoom] = useState<Room | null>(null)\r\n  const [inputValue, setInputValue] = useState('')\r\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false)\r\n  const [loading, setLoading] = useState(true)\r\n  const [sending, setSending] = useState(false)\r\n  const [currentUser, setCurrentUser] = useState<any>(null)\r\n  const [roomId, setRoomId] = useState<string>('')\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null)\r\n  const [uploadingMedia, setUploadingMedia] = useState(false)\r\n  const [showRoomMenu, setShowRoomMenu] = useState(false)\r\n  const messagesEndRef = useRef<HTMLDivElement>(null)\r\n  const messagesContainerRef = useRef<HTMLDivElement>(null)\r\n  const sendQueueRef = useRef<any[]>([])\r\n  const flushTimerRef = useRef<number | null>(null)\r\n  const lastInputEventTimeRef = useRef<number | null>(null)\r\n  const fileInputRef = useRef<HTMLInputElement>(null)\r\n  const supabase = createClient()\r\n  const router = useRouter()\r\n\r\n  // Handle async params for Next.js 16\r\n  useEffect(() => {\r\n    const getRoomId = async () => {\r\n      const resolvedParams = await Promise.resolve(params)\r\n      setRoomId(resolvedParams.id)\r\n    }\r\n    getRoomId()\r\n  }, [params])\r\n\r\n  const scrollToBottom = () => {\r\n    requestAnimationFrame(() => {\r\n      messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\r\n    })\r\n  }\r\n\r\n  // Fetch room information\r\n  useEffect(() => {\r\n    if (!roomId) return\r\n\r\n    const fetchRoom = async () => {\r\n      try {\r\n        const { data, error } = await supabase\r\n          .from('rooms')\r\n          .select('*')\r\n          .eq('id', roomId)\r\n          .single()\r\n\r\n        if (error) throw error\r\n        setRoom(data)\r\n      } catch (err) {\r\n        console.error('Error fetching room:', err)\r\n        router.push('/')\r\n      }\r\n    }\r\n\r\n    fetchRoom()\r\n  }, [roomId, supabase, router])\r\n\r\n  // Get current user\r\n  useEffect(() => {\r\n    const getUser = async () => {\r\n      const { data: { user } } = await supabase.auth.getUser()\r\n      setCurrentUser(user)\r\n    }\r\n    getUser()\r\n  }, [supabase])\r\n\r\n  // Fetch initial messages\r\n  useEffect(() => {\r\n    const fetchMessages = async () => {\r\n      try {\r\n        const response = await fetch(`/api/chat/get-messages?room_id=${roomId}`)\r\n        if (!response.ok) throw new Error('Failed to fetch messages')\r\n        \r\n        const data = await response.json()\r\n        performance.mark('messages_fetch_start')\r\n        setMessages(data || [])\r\n        setLoading(false)\r\n        requestAnimationFrame(() => {\r\n          performance.mark('messages_render_end')\r\n          performance.measure('messages_initial_render', 'messages_fetch_start', 'messages_render_end')\r\n        })\r\n        setTimeout(scrollToBottom, 100)\r\n      } catch (err) {\r\n        console.error('Error fetching messages:', err)\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    if (roomId) {\r\n      fetchMessages()\r\n    }\r\n  }, [roomId])\r\n\r\n  // Subscribe to real-time messages\r\n  useEffect(() => {\r\n    if (!roomId) return\r\n\r\n    const channel = supabase\r\n      .channel(`room:${roomId}`)\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: 'INSERT',\r\n          schema: 'public',\r\n          table: 'messages',\r\n          filter: `room_id=eq.${roomId}`,\r\n        },\r\n        async (payload) => {\r\n          // Fetch the new message with profile data\r\n          const { data: newMessage } = await supabase\r\n            .from('messages')\r\n            .select(`\r\n              *,\r\n              profiles (username, avatar_url)\r\n            `)\r\n            .eq('id', payload.new.id)\r\n            .single()\r\n\r\n          if (newMessage) {\r\n            performance.mark('message_append_start')\r\n            setMessages((prev) => [...prev, newMessage])\r\n            requestAnimationFrame(() => {\r\n              performance.mark('message_append_end')\r\n              performance.measure('message_append_render', 'message_append_start', 'message_append_end')\r\n            })\r\n            setTimeout(scrollToBottom, 100)\r\n          }\r\n        }\r\n      )\r\n      .subscribe()\r\n\r\n    return () => {\r\n      supabase.removeChannel(channel)\r\n    }\r\n  }, [roomId, supabase])\r\n\r\n  // Auto-scroll when new messages arrive\r\n  useEffect(() => {\r\n    scrollToBottom()\r\n  }, [messages])\r\n\r\n  useEffect(() => {\r\n    const el = messagesContainerRef.current\r\n    if (!el) return\r\n    let ticking = false\r\n    const onScroll = () => {\r\n      if (!ticking) {\r\n        ticking = true\r\n        requestAnimationFrame(() => {\r\n          ticking = false\r\n        })\r\n      }\r\n    }\r\n    el.addEventListener('scroll', onScroll, { passive: true })\r\n    return () => {\r\n      el.removeEventListener('scroll', onScroll as any)\r\n    }\r\n  }, [])\r\n\r\n  const tryGzip = async (data: any) => {\r\n    try {\r\n      // @ts-ignore\r\n      if (typeof CompressionStream !== 'undefined') {\r\n        // @ts-ignore\r\n        const cs = new CompressionStream('gzip')\r\n        const blob = new Blob([JSON.stringify(data)], { type: 'application/json' })\r\n        const stream = blob.stream().pipeThrough(cs)\r\n        const compressed = await new Response(stream).arrayBuffer()\r\n        return new Uint8Array(compressed)\r\n      }\r\n    } catch {}\r\n    return null\r\n  }\r\n\r\n  const flushQueue = async () => {\r\n    if (!sendQueueRef.current.length) return\r\n    const batch = sendQueueRef.current.splice(0, sendQueueRef.current.length)\r\n    const gz = await tryGzip({ room_id: roomId, messages: batch })\r\n    const response = await fetch('/api/chat/send-batch', {\r\n      method: 'POST',\r\n      headers: gz ? { 'Content-Encoding': 'gzip' } : { 'Content-Type': 'application/json' },\r\n      body: gz ? (gz as any) : JSON.stringify({ room_id: roomId, messages: batch }),\r\n    })\r\n    if (!response.ok) {\r\n      try {\r\n        const err = await response.json()\r\n        console.error('Batch send error:', err)\r\n      } catch {}\r\n    }\r\n  }\r\n\r\n  const scheduleFlush = () => {\r\n    if (flushTimerRef.current) return\r\n    flushTimerRef.current = setTimeout(() => {\r\n      flushTimerRef.current = null\r\n      flushQueue()\r\n    }, 200) as unknown as number\r\n  }\r\n\r\n  const enqueueMessage = (payload: { content: string; media_url?: string | null; media_type?: string | null }) => {\r\n    sendQueueRef.current.push(payload)\r\n    scheduleFlush()\r\n  }\r\n\r\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0]\r\n    if (!file) return\r\n\r\n    // Validate file type\r\n    const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp']\r\n    if (!validTypes.includes(file.type)) {\r\n      alert('Please select an image file (JPEG, PNG, GIF, or WebP)')\r\n      return\r\n    }\r\n\r\n    // Validate file size (max 5MB)\r\n    const maxSize = 5 * 1024 * 1024\r\n    if (file.size > maxSize) {\r\n      alert('File size must be less than 5MB')\r\n      return\r\n    }\r\n\r\n    setSelectedFile(file)\r\n  }\r\n\r\n  const handleSendMessage = async () => {\r\n    if ((!inputValue.trim() && !selectedFile) || !currentUser || sending) return\r\n\r\n    setSending(true)\r\n    setUploadingMedia(true)\r\n    let mediaUrl: string | null = null\r\n    let mediaType: string | null = null\r\n\r\n    try {\r\n      // Upload file if selected\r\n      if (selectedFile) {\r\n        const formData = new FormData()\r\n        formData.append('file', selectedFile)\r\n        formData.append('room_id', roomId)\r\n\r\n        const uploadResponse = await fetch('/api/chat/upload-media', {\r\n          method: 'POST',\r\n          body: formData,\r\n        })\r\n\r\n        if (!uploadResponse.ok) {\r\n          throw new Error('Failed to upload media')\r\n        }\r\n\r\n        const uploadData = await uploadResponse.json()\r\n        mediaUrl = uploadData.media_url\r\n        mediaType = uploadData.media_type\r\n      }\r\n\r\n      const content = inputValue.trim() || (selectedFile ? 'üì∑ Photo' : '')\r\n      if (lastInputEventTimeRef.current) {\r\n        const latency = performance.now() - lastInputEventTimeRef.current\r\n        try { console.log('input_latency_ms', Math.round(latency)) } catch {}\r\n      }\r\n      enqueueMessage({\r\n        content,\r\n        media_url: mediaUrl,\r\n        media_type: mediaType,\r\n      })\r\n\r\n      setInputValue('')\r\n      setSelectedFile(null)\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = ''\r\n      }\r\n    } catch (err) {\r\n      console.error('Error sending message:', err)\r\n      alert('Failed to send message. Please try again.')\r\n    } finally {\r\n      setSending(false)\r\n      setUploadingMedia(false)\r\n    }\r\n  }\r\n\r\n  const handleDeleteRoom = async () => {\r\n    if (!confirm('Are you sure you want to delete this room? This action cannot be undone.')) {\r\n      return\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`/api/rooms/delete?id=${roomId}`, {\r\n        method: 'DELETE',\r\n      })\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to delete room')\r\n      }\r\n\r\n      router.push('/')\r\n    } catch (err) {\r\n      console.error('Error deleting room:', err)\r\n      alert('Failed to delete room. Please try again.')\r\n    }\r\n  }\r\n\r\n  const isRoomOwner = currentUser && room && room.created_by === currentUser.id\r\n\r\n  const handleDeleteMessage = async (messageId: string) => {\r\n    try {\r\n      const response = await fetch(`/api/chat/delete-message?id=${messageId}`, {\r\n        method: 'DELETE',\r\n      })\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to delete message')\r\n      }\r\n\r\n      setMessages((prev) => prev.filter((msg) => msg.id !== messageId))\r\n    } catch (err) {\r\n      console.error('Error deleting message:', err)\r\n      alert('Failed to delete message. Please try again.')\r\n    }\r\n  }\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault()\r\n      lastInputEventTimeRef.current = performance.now()\r\n      handleSendMessage()\r\n    }\r\n  }\r\n\r\n  const formatTimestamp = (timestamp: string) => {\r\n    const date = new Date(timestamp)\r\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\r\n  }\r\n\r\n  useEffect(() => {\r\n    const id = setInterval(() => {\r\n      const mem: any = (performance as any).memory\r\n      if (mem) {\r\n        try {\r\n          console.log('memory_mb', Math.round(mem.usedJSHeapSize / 1048576))\r\n        } catch {}\r\n      }\r\n    }, 5000)\r\n    return () => clearInterval(id)\r\n  }, [])\r\n\r\n  const getAvatar = (message: Message) => {\r\n    if (message.profiles?.avatar_url) {\r\n      return message.profiles.avatar_url\r\n    }\r\n    const username = message.profiles?.username || message.user_id || 'user'\r\n    return `https://api.dicebear.com/7.x/avataaars/svg?seed=${username}`\r\n  }\r\n\r\n  const getSenderName = (message: Message) => {\r\n    return message.profiles?.username || 'Anonymous'\r\n  }\r\n\r\n  const emojis = ['üòä', 'üòÇ', 'üéâ', '‚ù§Ô∏è', 'üî•', 'üëç', 'üéÆ', 'üéµ', '‚ú®', 'üíØ']\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"h-screen flex items-center justify-center bg-background\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-12 h-12 border-4 border-primary/20 border-t-primary rounded-full animate-spin mx-auto mb-4\" />\r\n          <p className=\"text-foreground/60\">Loading chat room...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!room) {\r\n    return (\r\n      <div className=\"h-screen flex items-center justify-center bg-background\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-foreground/60 mb-4\">Room not found</p>\r\n          <Link href=\"/\">\r\n            <Button>Go Home</Button>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-screen flex flex-col bg-background\">\r\n      {/* Header - Mobile responsive */}\r\n      <header className=\"border-b border-border sticky top-0 z-40 bg-background/95 backdrop-blur-sm\">\r\n        <div className=\"max-w-6xl mx-auto px-2 sm:px-4 py-2 sm:py-4 flex items-center justify-between gap-1.5 sm:gap-2\">\r\n          <div className=\"flex items-center gap-1.5 sm:gap-4 min-w-0 flex-1\">\r\n            <Link href=\"/\" className=\"hover:opacity-70 transition-opacity flex-shrink-0\">\r\n              <h1 className=\"text-base sm:text-xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent\">\r\n                ChatBloom\r\n              </h1>\r\n            </Link>\r\n            <div className=\"hidden sm:flex items-center gap-2 pl-4 border-l border-border\">\r\n              <div className=\"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-primary to-secondary rounded-2xl flex items-center justify-center text-lg sm:text-xl flex-shrink-0\">\r\n                {room.emoji || 'üí¨'}\r\n              </div>\r\n              <div className=\"min-w-0\">\r\n                <h2 className=\"font-bold text-base sm:text-lg truncate\">{room.name}</h2>\r\n                <p className=\"text-xs text-foreground/60 truncate\">{room.topic}</p>\r\n              </div>\r\n            </div>\r\n            {/* Mobile room info */}\r\n            <div className=\"sm:hidden flex items-center gap-1.5 min-w-0 flex-1\">\r\n              <div className=\"w-7 h-7 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center text-sm flex-shrink-0\">\r\n                {room.emoji || 'üí¨'}\r\n              </div>\r\n              <div className=\"min-w-0\">\r\n                <h2 className=\"font-bold text-xs truncate\">{room.name}</h2>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex items-center gap-0.5 sm:gap-2 flex-shrink-0\">\r\n            <ThemeToggle />\r\n            <div className=\"relative\">\r\n              <Button \r\n                variant=\"ghost\" \r\n                size=\"icon\" \r\n                className=\"rounded-full h-8 w-8 sm:h-10 sm:w-10\"\r\n                onClick={() => setShowRoomMenu(!showRoomMenu)}\r\n              >\r\n                <MoreVertical className=\"w-3.5 h-3.5 sm:w-5 sm:h-5\" />\r\n              </Button>\r\n              {showRoomMenu && isRoomOwner && (\r\n                <>\r\n                  <div \r\n                    className=\"fixed inset-0 z-[5] bg-background/20\"\r\n                    onClick={() => setShowRoomMenu(false)}\r\n                  />\r\n                  <div className=\"absolute right-0 top-12 bg-card border border-border rounded-lg shadow-lg p-1 z-10 min-w-[140px]\">\r\n                    <Link href={`/room/${roomId}/edit`}>\r\n                      <button className=\"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-accent active:bg-accent/80 rounded-md transition-colors\">\r\n                        <Edit className=\"w-4 h-4\" />\r\n                        Edit Room\r\n                      </button>\r\n                    </Link>\r\n                    <button\r\n                      onClick={() => {\r\n                        setShowRoomMenu(false)\r\n                        handleDeleteRoom()\r\n                      }}\r\n                      className=\"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-destructive/10 active:bg-destructive/20 text-destructive rounded-md transition-colors\"\r\n                    >\r\n                      <Trash2 className=\"w-4 h-4\" />\r\n                      Delete Room\r\n                    </button>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Messages Container - Mobile responsive */}\r\n      <div ref={messagesContainerRef} className=\"flex-1 overflow-y-auto p-1.5 sm:p-4 md:p-6 space-y-1 sm:space-y-4\">\r\n        <div\r\n          className=\"max-w-4xl mx-auto\"\r\n          onClick={(e) => {\r\n            const target = e.target as HTMLElement\r\n            const actionEl = target.closest('[data-action]') as HTMLElement | null\r\n            if (actionEl) {\r\n              const action = actionEl.getAttribute('data-action')\r\n              const id = actionEl.getAttribute('data-message-id')\r\n              if (action === 'delete' && id) {\r\n                handleDeleteMessage(id)\r\n              }\r\n            }\r\n          }}\r\n        >\r\n          {messages.length === 0 ? (\r\n            <div className=\"text-center py-8 sm:py-12\">\r\n              <p className=\"text-foreground/60 text-sm sm:text-base\">No messages yet. Be the first to say something!</p>\r\n            </div>\r\n          ) : (\r\n            (() => {\r\n              const start = Math.max(0, messages.length - visibleCount)\r\n              const visible = messages.slice(start)\r\n              return (\r\n                <>\r\n                  {start > 0 && (\r\n                    <div className=\"flex justify-center py-2\">\r\n                      <Button variant=\"outline\" size=\"sm\" className=\"rounded-full\" onClick={() => setVisibleCount((c) => c + 200)}>\r\n                        Load older messages\r\n                      </Button>\r\n                    </div>\r\n                  )}\r\n                  {visible.map((msg) => (\r\n                    <ChatBubble\r\n                      key={msg.id}\r\n                      message={msg.content}\r\n                      sender={getSenderName(msg)}\r\n                      avatar={getAvatar(msg)}\r\n                      isOwn={currentUser?.id === msg.user_id}\r\n                      timestamp={formatTimestamp(msg.created_at)}\r\n                      reactions={[]}\r\n                      messageId={msg.id}\r\n                      onDelete={handleDeleteMessage}\r\n                      mediaUrl={msg.media_url}\r\n                      mediaType={msg.media_type}\r\n                    />\r\n                  ))}\r\n                </>\r\n              )\r\n            })()\r\n          )}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Input Section - Mobile responsive */}\r\n      {!currentUser ? (\r\n        <div className=\"border-t border-border bg-background p-2 sm:p-4 text-center\">\r\n          <p className=\"text-foreground/60 mb-1.5 sm:mb-2 text-xs sm:text-base\">Please sign in to send messages</p>\r\n          <Link href=\"/auth\">\r\n            <Button size=\"sm\" className=\"text-xs sm:text-sm h-7 sm:h-9\">Sign In</Button>\r\n          </Link>\r\n        </div>\r\n      ) : (\r\n        <div className=\"border-t border-border bg-background sticky bottom-0 p-2 sm:p-4 md:p-6\">\r\n          <div className=\"max-w-4xl mx-auto\">\r\n            {/* Emoji Picker */}\r\n            {showEmojiPicker && (\r\n              <Card className=\"mb-2 sm:mb-4 p-2 sm:p-4 bg-card\">\r\n                <div className=\"grid grid-cols-6 sm:grid-cols-5 gap-1.5 sm:gap-2\">\r\n                  {emojis.map((emoji) => (\r\n                    <button\r\n                      key={emoji}\r\n                      onClick={() => {\r\n                        setInputValue(inputValue + emoji)\r\n                        setShowEmojiPicker(false)\r\n                      }}\r\n                      className=\"text-xl sm:text-2xl hover:scale-125 transition-transform p-1 sm:p-2\"\r\n                    >\r\n                      {emoji}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </Card>\r\n            )}\r\n\r\n            {/* Selected File Preview */}\r\n            {selectedFile && (\r\n              <div className=\"mb-2 relative inline-block\">\r\n                <div className=\"relative w-20 h-20 sm:w-24 sm:h-24 rounded-lg overflow-hidden border border-border\">\r\n                  <img\r\n                    src={URL.createObjectURL(selectedFile)}\r\n                    alt=\"Preview\"\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                  <button\r\n                    onClick={() => {\r\n                      setSelectedFile(null)\r\n                      if (fileInputRef.current) fileInputRef.current.value = ''\r\n                    }}\r\n                    className=\"absolute top-1 right-1 bg-destructive text-destructive-foreground rounded-full p-1 hover:bg-destructive/90\"\r\n                  >\r\n                    <X className=\"w-3 h-3\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Input Field - Mobile responsive */}\r\n            <div className=\"flex gap-1 sm:gap-2 items-end\">\r\n              <input\r\n                ref={fileInputRef}\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                onChange={handleFileSelect}\r\n                className=\"hidden\"\r\n              />\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"rounded-full h-8 w-8 sm:h-10 sm:w-10\"\r\n                onClick={() => setShowEmojiPicker(!showEmojiPicker)}\r\n              >\r\n                <Smile className=\"w-3.5 h-3.5 sm:w-5 sm:h-5\" />\r\n              </Button>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"rounded-full h-8 w-8 sm:h-10 sm:w-10\"\r\n                onClick={() => fileInputRef.current?.click()}\r\n                disabled={uploadingMedia}\r\n              >\r\n                <Paperclip className=\"w-3.5 h-3.5 sm:w-5 sm:h-5\" />\r\n              </Button>\r\n              <Input\r\n                placeholder=\"Type a message...\"\r\n                value={inputValue}\r\n                onChange={(e) => setInputValue(e.target.value)}\r\n                onKeyPress={handleKeyPress}\r\n                className=\"rounded-full px-3 sm:px-6 py-1.5 sm:py-2 text-xs sm:text-base flex-1 min-w-0 h-8 sm:h-10\"\r\n                disabled={sending || uploadingMedia}\r\n              />\r\n              <Button\r\n                onClick={() => {\r\n                  lastInputEventTimeRef.current = performance.now()\r\n                  handleSendMessage()\r\n                }}\r\n                className=\"bg-primary hover:bg-primary/90 rounded-full h-8 w-8 sm:h-10 sm:w-10 flex-shrink-0\"\r\n                size=\"icon\"\r\n                disabled={sending || uploadingMedia || (!inputValue.trim() && !selectedFile)}\r\n              >\r\n                {uploadingMedia ? (\r\n                  <div className=\"w-3.5 h-3.5 sm:w-5 sm:h-5 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n                ) : (\r\n                  <SendHorizontal className=\"w-3.5 h-3.5 sm:w-5 sm:h-5\" />\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAXA;;;;;;;;;;;;AAoCe,SAAS,SAAS,EAAE,MAAM,EAAwD;IAC/F,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAS;IACzD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAM;IACpD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAS;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAc;IAC9D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,iBAAiB,IAAA,+MAAM,EAAiB;IAC9C,MAAM,uBAAuB,IAAA,+MAAM,EAAiB;IACpD,MAAM,eAAe,IAAA,+MAAM,EAAQ,EAAE;IACrC,MAAM,gBAAgB,IAAA,+MAAM,EAAgB;IAC5C,MAAM,wBAAwB,IAAA,+MAAM,EAAgB;IACpD,MAAM,eAAe,IAAA,+MAAM,EAAmB;IAC9C,MAAM,WAAW,IAAA,yIAAY;IAC7B,MAAM,SAAS,IAAA,+IAAS;IAExB,qCAAqC;IACrC,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY;YAChB,MAAM,iBAAiB,MAAM,QAAQ,OAAO,CAAC;YAC7C,UAAU,eAAe,EAAE;QAC7B;QACA;IACF,GAAG;QAAC;KAAO;IAEX,MAAM,iBAAiB;QACrB,sBAAsB;YACpB,eAAe,OAAO,EAAE,eAAe;gBAAE,UAAU;YAAS;QAC9D;IACF;IAEA,yBAAyB;IACzB,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,QAAQ;QAEb,MAAM,YAAY;YAChB,IAAI;gBACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,QACT,MAAM;gBAET,IAAI,OAAO,MAAM;gBACjB,QAAQ;YACV,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,wBAAwB;gBACtC,OAAO,IAAI,CAAC;YACd;QACF;QAEA;IACF,GAAG;QAAC;QAAQ;QAAU;KAAO;IAE7B,mBAAmB;IACnB,IAAA,kNAAS,EAAC;QACR,MAAM,UAAU;YACd,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;YACtD,eAAe;QACjB;QACA;IACF,GAAG;QAAC;KAAS;IAEb,yBAAyB;IACzB,IAAA,kNAAS,EAAC;QACR,MAAM,gBAAgB;YACpB,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM,CAAC,+BAA+B,EAAE,QAAQ;gBACvE,IAAI,CAAC,SAAS,EAAE,EAAE,MAAM,IAAI,MAAM;gBAElC,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,YAAY,IAAI,CAAC;gBACjB,YAAY,QAAQ,EAAE;gBACtB,WAAW;gBACX,sBAAsB;oBACpB,YAAY,IAAI,CAAC;oBACjB,YAAY,OAAO,CAAC,2BAA2B,wBAAwB;gBACzE;gBACA,WAAW,gBAAgB;YAC7B,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,4BAA4B;gBAC1C,WAAW;YACb;QACF;QAEA,IAAI,QAAQ;YACV;QACF;IACF,GAAG;QAAC;KAAO;IAEX,kCAAkC;IAClC,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,QAAQ;QAEb,MAAM,UAAU,SACb,OAAO,CAAC,CAAC,KAAK,EAAE,QAAQ,EACxB,EAAE,CACD,oBACA;YACE,OAAO;YACP,QAAQ;YACR,OAAO;YACP,QAAQ,CAAC,WAAW,EAAE,QAAQ;QAChC,GACA,OAAO;YACL,0CAA0C;YAC1C,MAAM,EAAE,MAAM,UAAU,EAAE,GAAG,MAAM,SAChC,IAAI,CAAC,YACL,MAAM,CAAC,CAAC;;;YAGT,CAAC,EACA,EAAE,CAAC,MAAM,QAAQ,GAAG,CAAC,EAAE,EACvB,MAAM;YAET,IAAI,YAAY;gBACd,YAAY,IAAI,CAAC;gBACjB,YAAY,CAAC,OAAS;2BAAI;wBAAM;qBAAW;gBAC3C,sBAAsB;oBACpB,YAAY,IAAI,CAAC;oBACjB,YAAY,OAAO,CAAC,yBAAyB,wBAAwB;gBACvE;gBACA,WAAW,gBAAgB;YAC7B;QACF,GAED,SAAS;QAEZ,OAAO;YACL,SAAS,aAAa,CAAC;QACzB;IACF,GAAG;QAAC;QAAQ;KAAS;IAErB,uCAAuC;IACvC,IAAA,kNAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAS;IAEb,IAAA,kNAAS,EAAC;QACR,MAAM,KAAK,qBAAqB,OAAO;QACvC,IAAI,CAAC,IAAI;QACT,IAAI,UAAU;QACd,MAAM,WAAW;YACf,IAAI,CAAC,SAAS;gBACZ,UAAU;gBACV,sBAAsB;oBACpB,UAAU;gBACZ;YACF;QACF;QACA,GAAG,gBAAgB,CAAC,UAAU,UAAU;YAAE,SAAS;QAAK;QACxD,OAAO;YACL,GAAG,mBAAmB,CAAC,UAAU;QACnC;IACF,GAAG,EAAE;IAEL,MAAM,UAAU,OAAO;QACrB,IAAI;YACF,aAAa;YACb,IAAI,OAAO,sBAAsB,aAAa;gBAC5C,aAAa;gBACb,MAAM,KAAK,IAAI,kBAAkB;gBACjC,MAAM,OAAO,IAAI,KAAK;oBAAC,KAAK,SAAS,CAAC;iBAAM,EAAE;oBAAE,MAAM;gBAAmB;gBACzE,MAAM,SAAS,KAAK,MAAM,GAAG,WAAW,CAAC;gBACzC,MAAM,aAAa,MAAM,IAAI,SAAS,QAAQ,WAAW;gBACzD,OAAO,IAAI,WAAW;YACxB;QACF,EAAE,OAAM,CAAC;QACT,OAAO;IACT;IAEA,MAAM,aAAa;QACjB,IAAI,CAAC,aAAa,OAAO,CAAC,MAAM,EAAE;QAClC,MAAM,QAAQ,aAAa,OAAO,CAAC,MAAM,CAAC,GAAG,aAAa,OAAO,CAAC,MAAM;QACxE,MAAM,KAAK,MAAM,QAAQ;YAAE,SAAS;YAAQ,UAAU;QAAM;QAC5D,MAAM,WAAW,MAAM,MAAM,wBAAwB;YACnD,QAAQ;YACR,SAAS,KAAK;gBAAE,oBAAoB;YAAO,IAAI;gBAAE,gBAAgB;YAAmB;YACpF,MAAM,KAAM,KAAa,KAAK,SAAS,CAAC;gBAAE,SAAS;gBAAQ,UAAU;YAAM;QAC7E;QACA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,IAAI;gBACF,MAAM,MAAM,MAAM,SAAS,IAAI;gBAC/B,QAAQ,KAAK,CAAC,qBAAqB;YACrC,EAAE,OAAM,CAAC;QACX;IACF;IAEA,MAAM,gBAAgB;QACpB,IAAI,cAAc,OAAO,EAAE;QAC3B,cAAc,OAAO,GAAG,WAAW;YACjC,cAAc,OAAO,GAAG;YACxB;QACF,GAAG;IACL;IAEA,MAAM,iBAAiB,CAAC;QACtB,aAAa,OAAO,CAAC,IAAI,CAAC;QAC1B;IACF;IAEA,MAAM,mBAAmB,CAAC;QACxB,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QAChC,IAAI,CAAC,MAAM;QAEX,qBAAqB;QACrB,MAAM,aAAa;YAAC;YAAc;YAAa;YAAa;YAAa;SAAa;QACtF,IAAI,CAAC,WAAW,QAAQ,CAAC,KAAK,IAAI,GAAG;YACnC,MAAM;YACN;QACF;QAEA,+BAA+B;QAC/B,MAAM,UAAU,IAAI,OAAO;QAC3B,IAAI,KAAK,IAAI,GAAG,SAAS;YACvB,MAAM;YACN;QACF;QAEA,gBAAgB;IAClB;IAEA,MAAM,oBAAoB;QACxB,IAAI,AAAC,CAAC,WAAW,IAAI,MAAM,CAAC,gBAAiB,CAAC,eAAe,SAAS;QAEtE,WAAW;QACX,kBAAkB;QAClB,IAAI,WAA0B;QAC9B,IAAI,YAA2B;QAE/B,IAAI;YACF,0BAA0B;YAC1B,IAAI,cAAc;gBAChB,MAAM,WAAW,IAAI;gBACrB,SAAS,MAAM,CAAC,QAAQ;gBACxB,SAAS,MAAM,CAAC,WAAW;gBAE3B,MAAM,iBAAiB,MAAM,MAAM,0BAA0B;oBAC3D,QAAQ;oBACR,MAAM;gBACR;gBAEA,IAAI,CAAC,eAAe,EAAE,EAAE;oBACtB,MAAM,IAAI,MAAM;gBAClB;gBAEA,MAAM,aAAa,MAAM,eAAe,IAAI;gBAC5C,WAAW,WAAW,SAAS;gBAC/B,YAAY,WAAW,UAAU;YACnC;YAEA,MAAM,UAAU,WAAW,IAAI,MAAM,CAAC,eAAe,aAAa,EAAE;YACpE,IAAI,sBAAsB,OAAO,EAAE;gBACjC,MAAM,UAAU,YAAY,GAAG,KAAK,sBAAsB,OAAO;gBACjE,IAAI;oBAAE,QAAQ,GAAG,CAAC,oBAAoB,KAAK,KAAK,CAAC;gBAAU,EAAE,OAAM,CAAC;YACtE;YACA,eAAe;gBACb;gBACA,WAAW;gBACX,YAAY;YACd;YAEA,cAAc;YACd,gBAAgB;YAChB,IAAI,aAAa,OAAO,EAAE;gBACxB,aAAa,OAAO,CAAC,KAAK,GAAG;YAC/B;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,0BAA0B;YACxC,MAAM;QACR,SAAU;YACR,WAAW;YACX,kBAAkB;QACpB;IACF;IAEA,MAAM,mBAAmB;QACvB,IAAI,CAAC,QAAQ,6EAA6E;YACxF;QACF;QAEA,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,CAAC,qBAAqB,EAAE,QAAQ,EAAE;gBAC7D,QAAQ;YACV;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM;YAClB;YAEA,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,wBAAwB;YACtC,MAAM;QACR;IACF;IAEA,MAAM,cAAc,eAAe,QAAQ,KAAK,UAAU,KAAK,YAAY,EAAE;IAE7E,MAAM,sBAAsB,OAAO;QACjC,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,CAAC,4BAA4B,EAAE,WAAW,EAAE;gBACvE,QAAQ;YACV;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM;YAClB;YAEA,YAAY,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,MAAQ,IAAI,EAAE,KAAK;QACxD,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,2BAA2B;YACzC,MAAM;QACR;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,IAAI,EAAE,GAAG,KAAK,WAAW,CAAC,EAAE,QAAQ,EAAE;YACpC,EAAE,cAAc;YAChB,sBAAsB,OAAO,GAAG,YAAY,GAAG;YAC/C;QACF;IACF;IAEA,MAAM,kBAAkB,CAAC;QACvB,MAAM,OAAO,IAAI,KAAK;QACtB,OAAO,KAAK,kBAAkB,CAAC,EAAE,EAAE;YAAE,MAAM;YAAW,QAAQ;QAAU;IAC1E;IAEA,IAAA,kNAAS,EAAC;QACR,MAAM,KAAK,YAAY;YACrB,MAAM,MAAW,AAAC,YAAoB,MAAM;YAC5C,IAAI,KAAK;gBACP,IAAI;oBACF,QAAQ,GAAG,CAAC,aAAa,KAAK,KAAK,CAAC,IAAI,cAAc,GAAG;gBAC3D,EAAE,OAAM,CAAC;YACX;QACF,GAAG;QACH,OAAO,IAAM,cAAc;IAC7B,GAAG,EAAE;IAEL,MAAM,YAAY,CAAC;QACjB,IAAI,QAAQ,QAAQ,EAAE,YAAY;YAChC,OAAO,QAAQ,QAAQ,CAAC,UAAU;QACpC;QACA,MAAM,WAAW,QAAQ,QAAQ,EAAE,YAAY,QAAQ,OAAO,IAAI;QAClE,OAAO,CAAC,gDAAgD,EAAE,UAAU;IACtE;IAEA,MAAM,gBAAgB,CAAC;QACrB,OAAO,QAAQ,QAAQ,EAAE,YAAY;IACvC;IAEA,MAAM,SAAS;QAAC;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAK;KAAK;IAE1E,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;;;;;;IAI1C;IAEA,IAAI,CAAC,MAAM;QACT,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCAA0B;;;;;;kCACvC,8OAAC,uKAAI;wBAAC,MAAK;kCACT,cAAA,8OAAC,qIAAM;sCAAC;;;;;;;;;;;;;;;;;;;;;;IAKlB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAO,WAAU;0BAChB,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,uKAAI;oCAAC,MAAK;oCAAI,WAAU;8CACvB,cAAA,8OAAC;wCAAG,WAAU;kDAAuG;;;;;;;;;;;8CAIvH,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;sDACZ,KAAK,KAAK,IAAI;;;;;;sDAEjB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAG,WAAU;8DAA2C,KAAK,IAAI;;;;;;8DAClE,8OAAC;oDAAE,WAAU;8DAAuC,KAAK,KAAK;;;;;;;;;;;;;;;;;;8CAIlE,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;sDACZ,KAAK,KAAK,IAAI;;;;;;sDAEjB,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC;gDAAG,WAAU;0DAA8B,KAAK,IAAI;;;;;;;;;;;;;;;;;;;;;;;sCAI3D,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,6IAAW;;;;;8CACZ,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,qIAAM;4CACL,SAAQ;4CACR,MAAK;4CACL,WAAU;4CACV,SAAS,IAAM,gBAAgB,CAAC;sDAEhC,cAAA,8OAAC,0OAAY;gDAAC,WAAU;;;;;;;;;;;wCAEzB,gBAAgB,6BACf;;8DACE,8OAAC;oDACC,WAAU;oDACV,SAAS,IAAM,gBAAgB;;;;;;8DAEjC,8OAAC;oDAAI,WAAU;;sEACb,8OAAC,uKAAI;4DAAC,MAAM,CAAC,MAAM,EAAE,OAAO,KAAK,CAAC;sEAChC,cAAA,8OAAC;gEAAO,WAAU;;kFAChB,8OAAC,mNAAI;wEAAC,WAAU;;;;;;oEAAY;;;;;;;;;;;;sEAIhC,8OAAC;4DACC,SAAS;gEACP,gBAAgB;gEAChB;4DACF;4DACA,WAAU;;8EAEV,8OAAC,oNAAM;oEAAC,WAAU;;;;;;gEAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAY9C,8OAAC;gBAAI,KAAK;gBAAsB,WAAU;0BACxC,cAAA,8OAAC;oBACC,WAAU;oBACV,SAAS,CAAC;wBACR,MAAM,SAAS,EAAE,MAAM;wBACvB,MAAM,WAAW,OAAO,OAAO,CAAC;wBAChC,IAAI,UAAU;4BACZ,MAAM,SAAS,SAAS,YAAY,CAAC;4BACrC,MAAM,KAAK,SAAS,YAAY,CAAC;4BACjC,IAAI,WAAW,YAAY,IAAI;gCAC7B,oBAAoB;4BACtB;wBACF;oBACF;;wBAEC,SAAS,MAAM,KAAK,kBACnB,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAE,WAAU;0CAA0C;;;;;;;;;;mCAGzD,CAAC;4BACC,MAAM,QAAQ,KAAK,GAAG,CAAC,GAAG,SAAS,MAAM,GAAG;4BAC5C,MAAM,UAAU,SAAS,KAAK,CAAC;4BAC/B,qBACE;;oCACG,QAAQ,mBACP,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,qIAAM;4CAAC,SAAQ;4CAAU,MAAK;4CAAK,WAAU;4CAAe,SAAS,IAAM,gBAAgB,CAAC,IAAM,IAAI;sDAAM;;;;;;;;;;;oCAKhH,QAAQ,GAAG,CAAC,CAAC,oBACZ,8OAAC,2IAAU;4CAET,SAAS,IAAI,OAAO;4CACpB,QAAQ,cAAc;4CACtB,QAAQ,UAAU;4CAClB,OAAO,aAAa,OAAO,IAAI,OAAO;4CACtC,WAAW,gBAAgB,IAAI,UAAU;4CACzC,WAAW,EAAE;4CACb,WAAW,IAAI,EAAE;4CACjB,UAAU;4CACV,UAAU,IAAI,SAAS;4CACvB,WAAW,IAAI,UAAU;2CAVpB,IAAI,EAAE;;;;;;;wBAerB,CAAC;sCAEH,8OAAC;4BAAI,KAAK;;;;;;;;;;;;;;;;;YAKb,CAAC,4BACA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCAAyD;;;;;;kCACtE,8OAAC,uKAAI;wBAAC,MAAK;kCACT,cAAA,8OAAC,qIAAM;4BAAC,MAAK;4BAAK,WAAU;sCAAgC;;;;;;;;;;;;;;;;qCAIhE,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;wBAEZ,iCACC,8OAAC,iIAAI;4BAAC,WAAU;sCACd,cAAA,8OAAC;gCAAI,WAAU;0CACZ,OAAO,GAAG,CAAC,CAAC,sBACX,8OAAC;wCAEC,SAAS;4CACP,cAAc,aAAa;4CAC3B,mBAAmB;wCACrB;wCACA,WAAU;kDAET;uCAPI;;;;;;;;;;;;;;;wBAed,8BACC,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,KAAK,IAAI,eAAe,CAAC;wCACzB,KAAI;wCACJ,WAAU;;;;;;kDAEZ,8OAAC;wCACC,SAAS;4CACP,gBAAgB;4CAChB,IAAI,aAAa,OAAO,EAAE,aAAa,OAAO,CAAC,KAAK,GAAG;wCACzD;wCACA,WAAU;kDAEV,cAAA,8OAAC,iMAAC;4CAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;sCAOrB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,KAAK;oCACL,MAAK;oCACL,QAAO;oCACP,UAAU;oCACV,WAAU;;;;;;8CAEZ,8OAAC,qIAAM;oCACL,SAAQ;oCACR,MAAK;oCACL,WAAU;oCACV,SAAS,IAAM,mBAAmB,CAAC;8CAEnC,cAAA,8OAAC,6MAAK;wCAAC,WAAU;;;;;;;;;;;8CAEnB,8OAAC,qIAAM;oCACL,SAAQ;oCACR,MAAK;oCACL,WAAU;oCACV,SAAS,IAAM,aAAa,OAAO,EAAE;oCACrC,UAAU;8CAEV,cAAA,8OAAC,yNAAS;wCAAC,WAAU;;;;;;;;;;;8CAEvB,8OAAC,mIAAK;oCACJ,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;oCAC7C,YAAY;oCACZ,WAAU;oCACV,UAAU,WAAW;;;;;;8CAEvB,8OAAC,qIAAM;oCACL,SAAS;wCACP,sBAAsB,OAAO,GAAG,YAAY,GAAG;wCAC/C;oCACF;oCACA,WAAU;oCACV,MAAK;oCACL,UAAU,WAAW,kBAAmB,CAAC,WAAW,IAAI,MAAM,CAAC;8CAE9D,+BACC,8OAAC;wCAAI,WAAU;;;;;6DAEf,8OAAC,4OAAc;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAU5C"}}]
}